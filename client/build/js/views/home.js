define("HomeView",["jquery","underscore","backbone","text!templates/home.html","GameModel"],function(e,t,n,r,i){var s;return s=n.View.extend({initialize:function(){this.currSelected="NONE",this.model=new i,this.template=t.template(r)},events:{"keyup #peasant-name":"onPeasantNameType","keyup #king-name":"onKingNameType","keyup #king-pass":"onKingPassType","click #peasant-submit":"submitPeasant","click #king-submit":"submitKing","click .team.left img":"clickTeam","click .team.right img":"clickTeam"},render:function(){var t=this,n,n=this.template();return e(t.el).html(n),this},clickTeam:function(){e("html, body").animate({scrollTop:e("#form-start").offset().top-50},800)},onKingNameType:function(t){var n=e(this.el).find("#king-name").val().trim();n==""&&(n="&lt; your name here &gt;"),e(this.el).find("#king-name-preview").html(n)},onKingPassType:function(t){var n=e(this.el).find("#king-pass").val().trim();n==""&&(n="usurpthis"),e(this.el).find("#king-pass-preview").html(n)},onPeasantNameType:function(t){var n=e(this.el).find("#peasant-name").val().trim();n==""&&(n="&lt; your name here &gt;"),e(this.el).find("#peasant-name-preview").html(n)},submitPeasant:function(){var t=this,n=e("#peasant-name").val();e("#peasant-submit").hide(),e("#peasant-loading").html("Loading...").show("slow"),e.ajax({url:"/api/v1/game/random",type:"GET",data:{peasantName:n},dataType:"json"}).done(function(n){e("#peasant-submit").show(),n.error?(console.log(n),e("#peasant-loading").html(n.error),e("#peasant-loading").show("slow")):n?(t.model.set(n),t.model.trigger("peasant-start-success")):(console.log(n),e("#peasant-loading").html(n.error))}).fail(function(t,n){console.log("Request failed: "+n),e("#peasant-loading").html("Request failed: "+n)})},submitKing:function(){var t=e.trim(e("#king-name").val()),n=e.trim(e("#king-pass").val());e("#king-submit").hide(),e("#king-loading").html("Loading...").show("slow"),this.model.save({kingName:t,kingPass:n},{silent:!1,sync:!0,success:function(t,n){e("#king-submit").show(),n&&n.error?(console.log("Error starting a new game"),n.error.code==2&&e("#king-loading").html("Game limit reached").show("slow")):(console.log("Success, starting a new game"),t.trigger("king-start-success"))},error:function(t,n){e("#king-submit").show(),n&&n.errors?(console.log("Error starting new game"),e("#king-loading").html("Error starting new game")):n.status===404?(console.log("Unable to start a new game: 404"),e("#king-loading").html("Unable to start a new game: Error 404")):n.status===500&&(console.log("Unable to start a new game: 500"),e("#king-loading").html("Unable to start a new game: Error 500"))}})}}),s});