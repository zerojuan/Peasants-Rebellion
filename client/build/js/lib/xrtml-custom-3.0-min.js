function guidGenerator(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}try{delete window.xRTML}catch(e){window.xRTML=undefined}(function(e,t){(function(e,t){var n={bind:function(e,t){if(e.bind)e.bind(t);else for(var n in t)e.addEventListener?e.addEventListener(n,t[n],!1):e.attachEvent?e.attachEvent("on"+n,t[n]):e[n]=t[n]},unbind:function(e,t){if(e.unbind)e.unbind(t);else for(var n in t)e.removeEventListener?e.removeEventListener(n,t[n],!1):e.detachEvent?e.detachEvent("on"+n,t[n]):e[n]&&delete e[n]}},r={bind:function(e){for(var t in e)typeof e[t]=="function"&&(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e[t]))},unbind:function(e){for(var t in e)if(this.listeners[t]instanceof Array){var n=this.listeners[t];for(var r=0,i=n.length;r<i;r++)if(n[r]===e[t]){n.splice(r,1);break}}},fire:function(e){var t;for(var n in e){t={type:n,target:this};for(var r in e[n]){var i=e[n][r];t[r]=i}if(this.listeners[t.type]instanceof Array){var s=new Array;for(var o=0;o<this.listeners[t.type].length;o++)s.push(this.listeners[t.type][o]);for(var o=0;o<s.length;o++)s[o].call(this,t)}}}};e.bind=n.bind,e.unbind=n.unbind,e.extend=function(e){e.listeners||(e.listeners={});for(var t in r)e[t]=r[t]}})(e.Event=e.Event||{})})(window.xRTML=window.xRTML||{}),function(e){(function(e,t){e.Event.extend(e),e.version="3.0.0",e.lastestBuild="14-11-2012 11:52:36",e.domLoaded=function(){return document.readyState=="loaded"||document.readyState=="complete"},e.isReady=!1,e.isLoaded=!1,e.ready=function(t){e.isReady?t():e.bind({ready:t})},e.load=function(t){e.isLoaded?t():e.bind({load:t})}})(e.xRTML=e.xRTML||{})}(window),function(e,t){(function(t,n){function ut(e,t,n,r){for(var i=0,s=t.length;i<s;i++)tt(e,t[i],n,r)}function at(e,t,n,r,i,s){var o=[],u=nt.setFilters[t.toLowerCase()];return u||tt.error(t),e?ut(e,r,o,i):o=i,o.length?u(o,n,s):[]}function ft(e,t,r,i){var s,o,u,a,f,l,c,h,d=e.match(I),v=0,m=d.length,g=q.POS,b=new RegExp("^"+q.POS.source+"(?!"+y+")","i"),w=function(){for(var e=1,t=arguments.length-2;e<t;e++)arguments[e]===n&&(s[e]=n)};for(;v<m;v++){g.exec(""),e=d[v].replace(A,""),a=[],u=0,f=i||null;while(s=g.exec(e)){h=s.index+s[0].length;if(h>u){c=e.slice(u,s.index),s.length>1&&s[0].replace(b,w),u=h,l=[t];if(o=_.test(c))c=c.replace(_,"").replace(k,"$&*");k.test(c)&&(l=f||[t],f=i),f=at(c,s[1],s[2],l,f,o)}g.lastIndex===s.index&&g.lastIndex++}f?(a=a.concat(f),(c=e.slice(u))&&c!==")"?ut(c,a,r,i):p.apply(r,a)):tt(e,t,r,i)}return m===1?r:tt.uniqueSort(r)}function lt(e,t,n){var r=t.dir,o=t.firstMatch,u=c++;return e||(e=function(e){return e===n}),o?function(t,n){while(t=t[r])if(t.nodeType===1)return e(t,n)?t:!1}:function(t,n){var o,a=u+"."+s,f=a+"."+i;while(t=t[r])if(t.nodeType===1){if((o=t[l])===f)return!1;if(typeof o=="string"&&o.indexOf(a)===0){if(t.sizset)return t}else{t[l]=f;if(e(t,n))return t.sizset=!0,t;t.sizset=!1}}}}function ct(e,t){return e?function(n,r){var i=t(n,r);return i&&e(i===!0?n:i,r)}:t}function ht(e,t,n){var r,i,s=0;for(;r=e[s];s++)nt.relative[r.part]?i=lt(i,nt.relative[r.part],t):(r.captures.push(t,n),i=ct(i,nt.filter[r.part].apply(null,r.captures)));return i}function pt(e){return function(t,n){var r,i=0;for(;r=e[i];i++)if(r(t,n))return!0;return!1}}var r,i,s,o,u,a=e.document,f=a.documentElement,l=("sizcache"+Math.random()).replace(".",""),c=0,h=[].slice,p=[].push,d="undefined",v=!1,m=!0,g="(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)",y="[\\x20\\t\\n\\r\\f]",w="([*^$|!~]?={1})",E="(?:-?[#_a-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)",S="\\["+y+"*("+g+"+)"+y+"*(?:"+w+y+"*(?:(['\"])(.*?)\\3|("+E+"+)|)|)"+y+"*\\]",x=":("+g+"+)(?:\\(([\"']?)([^()]*|.*)\\2\\))?",T=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^\\-]|$)",N=y+"*([\\x20\\t\\n\\r\\f>+~])"+y+"*",C=new RegExp("^"+y+"*,"+y+"*"),k=new RegExp("^"+N),L=new RegExp("("+S.replace("3","4")+"|"+x.replace("2","8")+"|\\\\[>+~]|[^\\x20\\t\\n\\r\\f>+~]|\\\\.)+|"+N,"g"),A=new RegExp("^"+y),O=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,M=/^[\x20\t\n\r\f]*[+~][\x20\t\n\r\f]*$/,_=/:not\($/,D=/(-?)(\d*)(?:n([+\-]?\d*))?/,P=/\D/,H=/h\d/i,B=/input|select|textarea|button/i,j=/^\+|[\x20\t\n\r\f]*/g,F=/\\(?!\\)/g,I=/([^,\\\[\]]+|\[[^\[]*\]|\([^\(]*\)|\\.)+/g,q={ID:new RegExp("^#("+g+"+)"),CLASS:new RegExp("^\\.("+g+"+)"),NAME:new RegExp("^\\[name=['\"]?("+g+"+)['\"]?\\]"),TAG:new RegExp("^("+g.replace("[-","[-\\*")+"+)"),ATTR:new RegExp("^"+S),PSEUDO:new RegExp("^"+x),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+y+"*(even|odd|(?:[+\\-]?\\d+|(?:[+\\-]?\\d*)?n"+y+"*(?:[+\\-]"+y+"*\\d+)?))"+y+"*\\))?","i"),POS:new RegExp(T,"ig"),globalPOS:new RegExp(T,"i")},R={},U=[],z={},W=[],X=function(e){return e.sizzleFilter=!0,e},V=function(e){return function(t){return t.nodeName.toLowerCase()==="input"&&t.type===e}},$=function(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}},J=function(e){var t=!1,n=a.createElement("div");try{t=e(n)}catch(r){}return n=null,t},K=J(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Q,G=J(function(e){e.id=l+0,e.innerHTML="<a name='"+l+"'/><div name='"+l+"'/>",f.insertBefore(e,f.firstChild);var t=a.getElementsByName&&a.getElementsByName(l).length===2+a.getElementsByName(l+0).length;return Q=!a.getElementById(l),f.removeChild(e),t}),Y=J(function(e){return e.appendChild(a.createComment("")),e.getElementsByTagName("*").length===0}),Z=J(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==d&&e.firstChild.getAttribute("href")==="#"}),et=J(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||e.getElementsByClassName("e").length===0?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length!==1)}),tt=function(e,t,n,r){n=n||[],t=t||a;var i,s,o,u,f=t.nodeType;if(f!==1&&f!==9)return[];if(!e||typeof e!="string")return n;o=it(t);if(!o&&!r)if(i=O.exec(e))if(u=i[1]){if(f===9){s=t.getElementById(u);if(!s||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&st(t,s)&&s.id===u)return n.push(s),n}else{if(i[2])return p.apply(n,h.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&et&&t.getElementsByClassName)return p.apply(n,h.call(t.getElementsByClassName(u),0)),n}return vt(e,t,n,r,o)},nt=tt.selectors={cacheLength:50,match:q,order:["ID","TAG"],attrHandle:{},createPseudo:X,find:{ID:Q?function(e,t,n){if(typeof t.getElementById!==d&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,t,r){if(typeof t.getElementById!==d&&!r){var i=t.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==d&&i.getAttributeNode("id").value===e?[i]:n:[]}},TAG:Y?function(e,t){if(typeof t.getElementsByTagName!==d)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);n=i}return n}},relative:{">":{dir:"parentNode",firstMatch:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",firstMatch:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(F,""),e[3]=(e[4]||e[5]||"").replace(F,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1]==="nth"){e[2]||tt.error(e[0]),e[2]=e[2].replace(j,"");var t=D.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!P.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=+(t[1]+(t[2]||1)),e[3]=+t[3]}else e[2]&&tt.error(e[0]);return e},PSEUDO:function(e){return q.CHILD.test(e[0])?null:e}},filter:{ID:Q?function(e){return e=e.replace(F,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(F,""),function(t){var n=typeof t.getAttributeNode!==d&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(F,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=R[e];return t||(t=R[e]=new RegExp("(^|"+y+")"+e+"("+y+"|$)"),U.push(e),U.length>nt.cacheLength&&delete R[U.shift()]),function(e){return t.test(e.className||e.getAttribute("class")||"")}},ATTR:function(e,t,n){return t?function(r){var i=tt.attr(r,e),s=i+"";if(i==null)return t==="!=";switch(t){case"=":return s===n;case"!=":return s!==n;case"^=":return n&&s.indexOf(n)===0;case"*=":return n&&s.indexOf(n)>-1;case"$=":return n&&s.substr(s.length-n.length)===n;case"~=":return(" "+s+" ").indexOf(n)>-1;case"|=":return s===n||s.substr(0,n.length+1)===n+"-"}}:function(t){return tt.attr(t,e)!=null}},CHILD:function(e,t,n){if(e==="nth"){var r=c++;return function(e){var i,s,o=0,u=e;if(t===1&&n===0)return!0;i=e.parentNode;if(i&&(i[l]!==r||!e.sizset)){for(u=i.firstChild;u;u=u.nextSibling)if(u.nodeType===1){u.sizset=++o;if(u===e)break}i[l]=r}return s=e.sizset-n,t===0?s===0:s%t===0&&s/t>=0}}return function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t,n,r,i){var s=nt.pseudos[e]||nt.pseudos[e.toLowerCase()];return s||tt.error("unsupported pseudo: "+e),s.sizzleFilter?s(n,r,i):s}},pseudos:{not:X(function(e,t,n){var r=dt(e,t,n);return function(e){return!r(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},contains:X(function(e){return function(t){return(t.textContent||t.innerText||ot(t)).indexOf(e)>-1}}),has:X(function(e){return function(t){return!!tt(e,t).length}}),header:function(e){return H.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===null||t.toLowerCase()===n)},radio:V("radio"),checkbox:V("checkbox"),file:V("file"),password:V("password"),image:V("image"),submit:$("submit"),reset:$("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return B.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,n){return n?e.slice(1):[e[0]]},last:function(e,t,n){var r=e.pop();return n?e:[r]},even:function(e,t,n){var r=[],i=n?1:0,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},odd:function(e,t,n){var r=[],i=n?0:1,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},lt:function(e,t,n){return n?e.slice(+t):e.slice(0,+t)},gt:function(e,t,n){return n?e.slice(0,+t+1):e.slice(+t+1)},eq:function(e,t,n){var r=e.splice(+t,1);return n?e:r}}};nt.setFilters.nth=nt.setFilters.eq,nt.filters=nt.pseudos,Z||(nt.attrHandle={href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}}),G&&(nt.order.push("NAME"),nt.find.NAME=function(e,t){if(typeof t.getElementsByName!==d)return t.getElementsByName(e)}),et&&(nt.order.splice(1,0,"CLASS"),nt.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!==d&&!n)return t.getElementsByClassName(e)});try{h.call(f.childNodes,0)[0].nodeType}catch(rt){h=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}var it=tt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},st=tt.contains=f.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:f.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},ot=tt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=ot(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=ot(t);return n};tt.attr=function(e,t){var n=it(e);n||(t=t.toLowerCase());if(nt.attrHandle[t])return nt.attrHandle[t](e);if(K||n)return e.getAttribute(t);var r=(e.attributes||{})[t];return r?typeof e[t]=="boolean"?e[t]?t:null:r.specified?r.value:null:null},tt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},[0,0].sort(function(){return m=0}),f.compareDocumentPosition?o=function(e,t){return e===t?(v=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:(o=function(e,t){if(e===t)return v=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return u(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return u(i[l],s[l]);return l===n?u(e,s[l],-1):u(i[l],t,1)},u=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),tt.uniqueSort=function(e){var t,n=1;if(o){v=m,e.sort(o);if(v)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1)}return e},function(){var e,t,n,i=function(n,r,i){return(t=n.exec(e))&&(!r||!nt.preFilter[r]||(t=nt.preFilter[r](t,i)))&&(e=e.slice(t[0].length)),t};r=function(r,s,o){e=r,n=[];var u,f,l=!o&&s!==a,c=[n];l&&(e=" "+e);while(e){f=!1,i(C)&&(c.push(n=[]),l&&(e=" "+e)),i(k)&&(n.push({part:t.pop(),captures:t}),f=!0);for(u in nt.filter)i(q[u],u,o)&&(t.shift(),n.push({part:u,captures:t}),f=!0);f||tt.error(r)}return c}}();var dt=tt.compile=function(e,t,n){var i,s,o,u=z[e];if(u&&u.context===t)return u.dirruns++,u;s=r(e,t,n);for(o=0;i=s[o];o++)s[o]=ht(i,t,n);return u=z[e]=pt(s),u.context=t,u.runs=u.dirruns=0,W.push(e),W.length>nt.cacheLength&&delete z[W.shift()],u};tt.matches=function(e,t){return tt(e,null,null,t)},tt.matchesSelector=function(e,t){return tt(t,null,null,[e]).length>0};var vt=function(e,t,n,r,o){var u,a,f,l,c,d,v,m,g,y,b,w=(g=e.match(I))&&g.length===1,E=e.match(L),S=t.nodeType;if(q.POS.test(e))return ft(e,t,n,r);!r&&w&&E.length>1&&S===9&&!o&&(g=q.ID.exec(E[0]))&&(t=nt.find.ID(g[1],t,o)[0],e=e.slice(E.shift().length));if(t){if(r)u=h.call(r,0);else{if(w){y=E.length>=1&&M.test(E[0])&&t.parentNode||t,b=E.pop().split(":not"),d=b[0];for(f=0,l=nt.order.length;f<l;f++){m=nt.order[f];if(g=q[m].exec(d)){u=nt.find[m]((g[1]||"").replace(F,""),y,o);if(u!=null)break}}if(u&&!b[1]){v=e.length-d.length,e=e.slice(0,v)+e.slice(v).replace(q[m],"");if(!e)return p.apply(n,h.call(u,0)),n}}u||(u=nt.find.TAG("*",t))}if(e&&(a=dt(e,t,o))){s=a.dirruns;for(f=0;c=u[f];f++)i=a.runs++,a(c,t)&&n.push(c)}}return n};a.querySelectorAll&&function(){var e,t=vt,n=/[^\\],/g,r=/^[\x20\t\n\r\f]*[+~]/,i=/'/g,s=/\=[\x20\t\n\r\f]*([^'"\]]*)[\x20\t\n\r\f]*\]/g,o=[],u=[":active"],a=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector;J(function(e){e.innerHTML="<select><option selected></option></select>",e.querySelectorAll("[selected]").length||o.push("\\["+y+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||o.push(":checked")}),J(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&o.push("[*^$]="+y+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'>",e.querySelectorAll(":enabled").length||o.push(":enabled",":disabled")}),o=o.length&&new RegExp(o.join("|")),vt=function(e,s,u,a,f){if(!a&&!f&&(!o||!o.test(e)))if(s.nodeType===9)try{return p.apply(u,h.call(s.querySelectorAll(e),0)),u}catch(c){}else if(s.nodeType===1&&s.nodeName.toLowerCase()!=="object"){var d,v=s,m=s.getAttribute("id"),g=m||l,y=s.parentNode,b=r.test(e);m?g=g.replace(i,"\\$&"):s.setAttribute("id",g),b&&y&&(s=y);try{if(s)return g="[id='"+g+"'] ",d=g+e.replace(n,"$&"+g),p.apply(u,h.call(s.querySelectorAll(d),0)),u}catch(c){}finally{m||v.removeAttribute("id")}}return t(e,s,u,a,f)},a&&(J(function(t){e=a.call(t,"div");try{a.call(t,"[test!='']:sizzle"),u.push(nt.match.PSEUDO)}catch(n){}}),u=new RegExp(u.join("|")),tt.matchesSelector=function(t,n){n=n.replace(s,"='$1']");if(!it(t)&&!u.test(n)&&(!o||!o.test(n)))try{var r=a.call(t,n);if(r||e||t.document&&t.document.nodeType!==11)return r}catch(i){}return tt(n,null,null,[t]).length>0})}(),t.Sizzle=tt})(e.xRTML=e.xRTML||{})}(window),function(xRTML,undefined){(function(JSON,undefined){(function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)r=rep[n],typeof r=="string"&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})()})(xRTML.JSON=xRTML.JSON||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r="xrtml:",i=function(t){return!t.getAttribute("version")||t.getAttribute("version")===e.version},s=function(e){var t=e.getElementsByTagName(r+"connection"),n=[];for(var s=0;s<t.length;++s)if(i(t[s])){var o=t[s];n.push(new a(o)),t[s].parentNode.removeChild(t[s--])}return n},o=function(e){var t=e.getElementsByTagName(r+"storage"),n=[];for(var s=0,o=t.length;s<o;s++)if(i(t[s])){var u=t[s];n.push({id:u.getAttribute("id"),baseurl:u.getAttribute("baseurl"),type:u.getAttribute("type"),connectionid:u.getAttribute("connectionid"),sessionid:u.getAttribute("sessionid"),onready:u.getAttribute("onready")?new Function("event","return "+u.getAttribute("onready")+"(event);"):null,onsession:u.getAttribute("onsession")?new Function("event","return "+u.getAttribute("onsession")+"(event);"):null,onexception:u.getAttribute("onexception")?new Function("event","event","return "+u.getAttribute("onexception")+"(event);"):null}),document.getElementsByTagName(r+"storages")[0].removeChild(t[s--])}return n},u=function(){var t=document,n=document.getElementsByTagName(r+"config");if(n.length==0)return null;if(n.length!=1)throw"xRTML requires a configuration tag per page.";return n=n[0],t=window.attachEvent?document:n,{debug:e.Common.Converter.toBoolean(n.getAttribute("debug")),logLevel:n.getAttribute("loglevel"),xrtmlActive:e.Common.Converter.toBoolean(n.getAttribute("xrtmlactive")),throwErrors:e.Common.Converter.toBoolean(n.getAttribute("throwerrors")),connectionAttempts:e.Common.Converter.toNumber(n.getAttribute("connectionattempts")),connectionTimeout:e.Common.Converter.toNumber(n.getAttribute("connectiontimeout")),remoteTrace:e.Common.Converter.toBoolean(n.getAttribute("remotetrace")),ortcUrl:n.getAttribute("ortcurl"),ortcLibrary:n.getAttribute("ortclibrary"),connections:s(t),storages:o(t)}},a=function(e,t){var n,r;if(e.attributes)for(var i=0;i<e.attributes.length;++i)n=e.attributes[i],n.specified&&(this[n.nodeName.toLowerCase()]=n.nodeValue);if(e.children.length!=0)for(var s=0;s<e.children.length;++s)r=e.children[s],childName=window.addEventListener?r.nodeName.split(":")[1].toLowerCase():r.nodeName.toLowerCase(),t?(r.attributes&&r.attributes.length==1?t.push(r.attributes[0].nodeValue):t.push(new a(r)),r.children&&new a(r,t)):(this[childName]=[],new a(r,this[childName]))},f=function(){var t,n=[],s=e.TagManager.getClasses();for(var o=0;o<s.length;++o){t=document.getElementsByTagName(r+s[o]);for(var u=0;u<t.length;++u){var f=t[u];if(!window.addEventListener&&f.scopeName.toLowerCase()!="xrtml")continue;if(i(f)){var h=new a(f);h.name=s[o],n.push(h),document.body.removeChild(t[u--])}}}return n};e.Event.extend(t),t.read=function(){var t=u();t&&(t.attribute=function(t){return e.Common.Object.insensitiveGetter(this,t)},this.fire({configLoad:{config:t}}));var n=f();n.length!=0&&this.fire({tagsLoad:{tags:n}})}})(e.DomParser=e.DomParser||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(e,t){var n=!1,r=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;e.extend=function(e){function o(){!n&&this.init&&this.init.apply(this,arguments)}var t=this.prototype;n=!0;var i=new this;n=!1;for(var s in e)i[s]=typeof e[s]=="function"&&typeof t[s]=="function"&&r.test(e[s])?function(e,n){return function(){var r=this._super;this._super=t[e];var i=n.apply(this,arguments);return this._super=r,i}}(s,e[s]):e[s];return o.prototype=i,o.prototype.constructor=o,o.extend=arguments.callee,o}})(e.Class=e.Class||function(){})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r=function(){if(typeof console!="undefined")return console;var t={id:null,buffer:[],style:"width: 100%; height: 40%; position: absolute; bottom:5px; left:5px; background: silver; padding: 5px; overflow: scroll;font-family:consolas,monospace;font-size:12px; ",printObject:function(e){var t="";for(property in e)t+=property+": "+e[property]+"; \n";return t},newLine:function(e,n){var r=document.createElement("p");r.style.color=n,r.innerHTML=e,t.id?document.getElementById(t.id).appendChild(r):t.buffer.push(r)},log:function(e){t.newLine(e,"black")},warn:function(e){t.newLine(e,"orange")},error:function(e){t.newLine(e,"red")},debug:function(e){t.newLine(e,"green")},init:function(){t.id="xRTML_Console_"+e.Common.Util.idGenerator();var n=document.createElement("div");n.id=t.id,n.style.cssText=t.style;for(var r=0,i=t.buffer.length;r<i;r++)n.appendChild(t.buffer[r]);buffer=[],document.body.appendChild(n),n.style.display=e.Config.debug?"block":"none",e.Config.debug&&document.body.appendChild(n)}};return t}();!window.addEventListener&&typeof console=="undefined"&&e.Config.debug&&(t=r.init()),t.log=function(e){r.log(e)},t.warn=function(e){r.warn(e)},t.error=function(t){r.error(t),e.Config.remoteTrace===!0&&this.fire({error:{error:t}})},t.debug=function(t){e.Config.debug===!0&&r.log(t)},e.Event.extend(t)})(e.Console=e.Console||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r="";e.Event.extend(t),t.logLevels={error:0,warn:1,info:2},t.debug=!1,t.logLevel=2,t.connectionAttempts=5,t.connectionTimeout=1e4,t.remoteTrace=!1,t.ortcLibrary=function(t,n){return arguments.length!=0&&(r=t,e.Common.DOM.loadScript({url:t,callback:n})),r},e.DomParser.bind({configLoad:function(n){var r=n.config;t.debug=r.attribute("debug")?r.attribute("debug"):t.debug,t.logLevel=r.attribute("logLevel")?r.attribute("logLevel"):t.logLevel,t.connectionAttempts=r.attribute("connectionAttempts")?r.attribute("connectionAttempts"):t.connectionAttempts,t.connectionTimeout=r.attribute("connectionTimeout")?r.attribute("connectionTimeout"):t.connectionTimeout,t.remoteTrace=r.attribute("remoteTrace")?r.attribute("remoteTrace"):t.remoteTrace;for(var i=0;i<r.connections.length;++i)e.ConnectionManager.create(r.connections[i]);for(var i=0;i<r.storages.length;++i)e.StorageManager.create(r.storages[i])}})})(e.Config=e.Config||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r={uiEffects:{blind:!0,bounce:!0,clip:!0,drop:!0,explode:!0,fade:!0,fold:!0,highlight:!0,puff:!0,pulsate:!0,scale:!0,shake:!0,size:!0,slide:!0,transfer:!0},cssPropsMapping:{"padding-top":"paddingTop"},checkIfEffectFunctionAvailable:function(t){var n=jQuery&&jQuery.fn&&(typeof jQuery.fn[t]).toLowerCase()=="function"||jQuery&&jQuery.effects&&(typeof jQuery.effects[t]).toLowerCase()=="function";n||e.Error.raise({code:e.Error.Codes.MISSING_LIBRARY,info:{library:"jQuery",module:t,className:"xRTML.Effect.Manager (internal class, no docs available)",methodName:"checkIfEffectFunctionAvailable (internal method, no docs available)"}})},callJQueryEffect:function(t){e.Console.debug("jQuery effect: Running "+t.effectName+" on element "+t.element.id+" with options "+e.JSON.stringify(t.effectOptions)+" and properties: "+e.JSON.stringify(t.effectProperties)),this.checkIfEffectFunctionAvailable(t.effectName);try{this.uiEffects[t.effectName]?jQuery.fn.effect.call(jQuery(t.element),t.effectName,t.effectOptions,t.effectSpeed,t.effectCallback):jQuery.fn[t.effectName].call(jQuery(t.element),t.effectProperties,t.effectOptions)}catch(n){e.Error.raise({code:e.Error.Codes.UNEXPECTED,info:{message:n.message,className:"xRTML.Effect.Manager (internal class, no docs available)",methodName:"callJQueryEffect (internal method, no docs available)"}})}},buildReverseEffectProperties:function(t){var n={};for(var r in t.properties){var i=e.Common.Object.insensitiveGetter(t.element.style,r.replace("-",""));if(!i||i=="")i=e.Common.DOM.getStyle({element:t.element,rule:r});n[r]=i}return n},cloneJQueryOptions:function(e){var t={};for(prop in e)t[prop]=e[prop];return t}},i={runEffects:function(t){if(this.effects){if(typeof t.stopCurrent=="undefined"||t.stopCurrent)r.checkIfEffectFunctionAvailable("animate"),jQuery(t.element).stop(!1,!0);for(var n=0;n<this.effects.length;n++){try{var i=r.cloneJQueryOptions(typeof this.effects[n].options=="object"?this.effects[n].options:e.JSON.parse(this.effects[n].options)),s=typeof this.effects[n].properties=="object"?this.effects[n].properties:e.JSON.parse(this.effects[n].properties),o=r.buildReverseEffectProperties({properties:s,element:t.element})}catch(u){e.Error.raise({code:e.Error.Codes.JSON_PARSE,info:{message:u.message,className:"xRTML.Effect.Provider (internal class, no docs available)",methodName:"runEffects"}})}r.callJQueryEffect({element:t.element,effectName:this.effects[n].name,effectOptions:i,effectProperties:s,effectSpeed:this.effects[n].speed,effectCallback:this.effects[n].callback?typeof this.effects[n].callback=="function"?this.effects[n].callback:new Function("","return "+this.effects[n].callback+"();"):null,revert:this.effects[n].revert}),this.effects[n].revert&&r.callJQueryEffect({element:t.element,effectName:this.effects[n].name,effectOptions:i,effectProperties:o,effectSpeed:this.effects[n].speed,effectCallback:null,revert:!1})}}}};t.extend=function(e){for(var t in i)e[t]=i[t]}})(e.Effect=e.Effect||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){e.Event.extend(t),t.raise=function(n){var i=new t.XRTMLError(n);return(new window.Error).stack?e.Console.error(i):r(i),i},t.XRTMLError=function(n){var r=n.code?n.code:e.Error.Codes.UNEXPECTED;this.name=r.type;var i=n.info?n.info:{};i.className=i.className?i.className:n.target?n.target.name?n.target.name:Object.prototype.toString.call(n.target):"Unknown",i.id=i.id?i.id:n.target?n.target.id:"Unknown",i.message=i.message?i.message:n.message,i.arguments=n.arguments,this.message=e.Common.String.template(r.message,i),this.type=r.type,this.target=n.target,this.info=i,t.fire({exception:{error:this}})},t.XRTMLError.prototype=window.Error.prototype,t.XRTMLError.prototype.constructor=t.XRTMLError,t.Codes={MANDATORY_PROPERTY:{type:"ValidationError",message:"The property {property} is required for a {className} with the id {id}."},INVALID_PROPERTY:{type:"ValidationError",message:"The property {property} of a {className} with the id {id} has the wrong type. The appropriate type would be {validType}."},CONNECTION_INACTIVE:{type:"ConnectionError",message:"Tried to perform an operation on Connection {id} which is not active."},CONNECTION_EXCEPTION:{type:"ConnectionError",message:"An unexpected problem occured on the Connection {id}. {message}"},CONNECTION_NOT_FOUND:{type:"ConnectionError",message:"Unable to find a Connection with the specified id: {id}."},CONNECTION_PROCESS:{type:"ConnectionError",message:"An error ocurred while processing the message {xRTMLMessage} arrived at Connection {id}. {message}"},CONNECTION_ADAPT:{type:"ConnectionError",message:"An error ocurred while adapting the message {originalMessage} arrived at Connection {id}. {message}"},CONNECTION_DUPLICATE:{type:"ConnectionError",message:"Connection with id {id} already exists."},ORTC_NOT_FOUND:{type:"ORTCError",message:"Unable to obtain the ORTC library from the address specified."},ORTC_UNAVAILABLE:{type:"ORTCError",message:"Connection {id}: ORTC client is not created yet."},ORTC_DISCONNECTED:{type:"ORTCError",message:"Connection {id}: Disconnect not possible. ORTC client is not connected."},ORTC_EXCEPTION:{type:"ORTCError",message:"An unexpected problem occured on the Connection {id}. {message}"},TAG_NOT_CREATED:{type:"TagError",message:"A problem occured while trying to create a {className} Tag with id {id}. {message}"},TAG_INACTIVE:{type:"TagError",message:"Tried to perform an action on a {className} with {id} which is not active."},TAG_UNREGISTERED:{type:"TagError",message:"The specified Tag does not exist in the registered tags namespace."},TAG_INVALID_CONFIG:{type:"TagError",message:"Unable to register a Tag with the specified configuration. {message}"},TAG_ABSTRACT:{type:"TagError",message:"The specified tag {tag} should not be instantiated."},TAG_ACTION_UNDEFINED:{type:"TagError",message:"Tried to perform an action {action} which is not defined on a {className} with id {id}."},TAG_NOT_FOUND:{type:"TagError",message:"Unable to find a Tag with the specified id: {id}."},TAG_PROCESS:{type:"TagError",message:"An error ocurred while processing the arrived message on a {className} with id {id}. {message}"},INVALID_MESSAGE:{type:"MessageError",message:"Tried to create a message with invalid properties. {message}"},TRIGGER_UNREGISTERED:{type:"MessageError",message:"A message arrived containing a trigger which is not registered by any Tag."},STORAGE_CONNECTION_UNAVAILABLE:{type:"StorageError",message:"The Remote Storage component for a {className} provider with id {id} could not find a connection with connectionId: {connectionId}"},STORAGE_UNAVAILABLE:{type:"StorageError",message:"The Remote Storage component for a {className} provider with id {id} is not available."},STORAGE_SESSION:{type:"StorageError",message:"The Remote Storage component for a {className} provider with id {id} was not able to get a session. {message}"},STORAGE_ACTION_UNDEFINED:{type:"StorageError",message:"Tried to perform an action which is not defined on a {className} with id {id}."},STORAGE_PERMISSIONS:{type:"StorageError",message:"Tried to perform an action for which the {className} with id {id} does not have the necessary permissions. Were the right channel permissions set on the server-side?"},STORAGE_OPERATION_TIMEOUT:{type:"StorageError",message:"The Storage operation with the id: {opId} was not completed whithin the expected timeout: {timeout}"},STORAGE_CALLBACK_FAILURE:{type:"StorageError",message:"The Storage operation with the id: {opId} callback has failed. {message}"},REQUEST_FAILURE:{type:"RequestError",message:"An error occured while calling the specified address. {message}"},REQUEST_UNAVAILABLE:{type:"RequestError",message:"Unable to obtain a response from the specified address."},REQUEST_UNSUPPORTED:{type:"RequestError",message:"This browser does not support XMLHttpRequest neither XDomainRequest."},JSON_PARSE:{type:"ParseError",message:"Unable to parse the specified String according to JSON specification rules. {message}"},DOM_PARSE:{type:"ParseError",message:"Unable to parse an XRTML DOM Node. "},MISSING_ARGUMENT:{type:"MethodError",message:"A method {methodName} was called but the required argument {argument} was undefined."},INVALID_ARGUMENT:{type:"MethodError",message:"The method {methodName} was called but the argument {argument} was of an invalid type. The expected type was {expectedType}"},UNEXPECTED:{type:"UnexpectedError",message:"An unexpected error occured. Cause error message is: {message}"},FATAL:{type:"FatalError",message:"A critical error occured. The error message is: {message}"},INVALID_DOM_ATTRIBUTE:{type:"InvalidDomAttribute",message:"An error occured when trying to retrive an unexisting attribute: {attribute}"},TEMPLATING:{type:"TemplateError",message:"An error occured when trying to apply bindings to a template. The cause is: {message}"},TEMPLATING_EFFECTS:{type:"TemplateError",message:"An error occured when trying to run effects binded in a template. Are the effects configured in the tag? The error cause is: {message}"},UNEXPECTEDMEDIA:{type:"UnexpectedMediaError",message:"An error occurred when trying to operate on media. The cause is: {message}"},UNEXPECTEDEVENT:{type:"UnexpectedEventError",message:'An error occurred when trying to process the "{eventType}" event handler. The cause is: {message}'},MISSING_LIBRARY:{type:"MissingLibrary",message:"A required library {library} {module} is not available. Please import this library."}};var r=function(t){function r(t,n,i,s){var o=[];for(var u=0;u<i;u++)o.push(" ");var a=o.join("");if(s<9){for(var f in t)if(t.hasOwnProperty(f)&&f!="name"&&f!="message")if(typeof t[f]=="string"||typeof t[f]=="number"||typeof t[f]=="boolean")n.push(a+f+": "+t[f]+"\n");else if(e.Common.Object.isObject(t[f]))n.push(a+f+": \n"),r(t[f],n,i+4,s+1);else if(e.Common.Array.isArray(t[f])){n.push(a+f+": \n");for(var u=0;u<t[f].length;u++)r(t[f],n,i+4,s+1)}}else n.push(a+t.toString()+"\n")}var n=[];n.push(t.name+": "+t.message+"\n"),r(t,n,0,1),e.Console.error(n.join(""))}})(e.Error=e.Error||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(t,n){t.contains=function(t){var n=t.items;for(var r=0,i=n.length;r<i;r++)if(e.Common.Object.equals({o1:n[r],o2:t.obj}))return!0;return!1},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(e.Common.Array=e.Common.Array||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(t,n){t.equals=function(t){return e.JSON.stringify(t.o1)===e.JSON.stringify(t.o2)},t.isObject=function(e){return""+e=="[object Object]"},t.insensitiveGetter=function(e,t){for(var n in e)if(e.hasOwnProperty&&e.hasOwnProperty(n)&&(t+"").toLowerCase()==(n+"").toLowerCase())return e[n]},t.keys=window.Object.keys||function(e){var n=[],r;for(r in e)t.prototype.hasOwnProperty.call(e,r)&&n.push(r);return n}})(e.Common.Object=e.Common.Object||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(e,t){e.trim=function(e){return typeof window.String.prototype.trim=="function"?e.trim():e.replace(/^\s*/,"").replace(/\s*$/,"")},e.template=function(e,t){for(var n in t){var r=new RegExp("\\{"+n+"\\}","gm");e=e.replace(r,t[n])}return e}})(e.Common.String=e.Common.String||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(e,t){e.loadScript=function(e){var t=document.createElement("script");t.type="text/javascript",t.readyState?t.onreadystatechange=function(){if(t.readyState=="loaded"||t.readyState=="complete")t.onreadystatechange=null,e.callback.apply(this,arguments)}:t.onload=function(){e.callback.apply(this,arguments)},t.src=e.url,document.getElementsByTagName("head")[0].appendChild(t)},e.getStyle=function(e){if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(e.element,"").getPropertyValue(e.rule);if(e.element.currentStyle){var t=e.rule.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});return e.element.currentStyle[t]}return""}})(e.Common.DOM=e.Common.DOM||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(t,n){t.post=function(e){e.method="POST",r(e)},t.get=function(e){e.method="GET";if(e.data!="undefined"){var t=e.url,n=e.data;t+=t.indexOf("?")==-1?"?":"&";for(var i in e.data){var s=n[i];typeof s!="object"&&typeof s!="boolean"&&(t+=i+"="+s+"&")}t.lastIndexOf("&")==t.length-1&&(t=t.slice(0,-1)),e.url=t}r(e)};var r=function(t){var n=i(t).create(t.method.toLowerCase(),t.url,e.Common.Function.proxy(function(e,n,r){typeof n!="undefined"&&n!=null?t.error&&t.error(n):t.success&&t.success(e),t.complete&&t.complete(e,n,r)},this),t.async,t.headers);n.send(t.data?t.data:null)},i=function(t){if(window.XMLHttpRequest&&(!t.crossDomain||"withCredentials"in s().getNativeObject()))return s();if(window.XDomainRequest)return o();e.Error.raise({code:e.Error.Codes.REQUEST_UNSUPPORTED,info:{className:"xRTML.Common.Request",methodName:"getRequestType (internal method, no docs available)"}})},s=function(){return{getNativeObject:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}e.Error.raise({code:e.Error.Codes.REQUEST_UNSUPPORTED,info:{className:"xRTML.Common.Request.XHR (internal class, no docs available)",methodName:"getNativeObject (internal method, no docs available)"}})},create:function(t,n,r,i,s){var o=this;o.xhr=this.getNativeObject(),o.callback=r,t=t.toUpperCase(),o.xhr.onreadystatechange=function(){try{this.readyState==4&&(this.status==200?o.callback(this.responseText,null,this.status):this.status==0?o.callback(null,"The status code is 0 which likely means that the server is unavailable.",this.status):o.callback(null,this.responseText,this.status))}catch(t){e.Console.error(t)}},o.xhr.open(t,n,i?i:!0),o.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),o.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var u in s)o.xhr.setRequestHeader(u,s[u]);return t=="POST"&&o.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o},send:function(t){t&&typeof t!="string"&&(t=e.JSON.stringify(t)),e.Console.debug("Performing request with payload: "+t),this.xhr.send(t)}}},o=function(){return{create:function(t,n,r,i){var s=this;s.xdr=new XDomainRequest,s.callback=r,t=t.toUpperCase(),s.xdr.onload=function(){try{s.callback(s.xdr.responseText)}catch(t){e.Error.raise({code:e.Error.Codes.UNEXPECTED,info:{message:t.message,className:"xRTML.Common.Request.XDR (internal class, no docs available)",methodName:"onload (internal method, no docs available)"}})}},s.xdr.onerror=function(){try{s.callback(null,s.xdr.responseText)}catch(t){e.Error.raise({code:e.Error.Codes.UNEXPECTED,info:{message:t.message,className:"xRTML.Common.Request.XDR (internal class, no docs available)",methodName:"onerror (internal method, no docs available)"}})}},s.xdr.open(t,n,i?i:!0);try{s.xdr.contentType="text/plain"}catch(o){}return s},send:function(t){function i(t){t&&typeof t!="string"&&(t=e.JSON.stringify(t)),e.Console.log("Performing request with payload:"+t),r.xdr.send(t),r.xdrTimeout&&(clearTimeout(r.xdrTimeout),r.xdrTimeout=n)}var r=this;r.xdrReady?i(t):r.xdrTimeout=setTimeout(function(){i(t)},500)}}}})(e.Common.Request=e.Common.Request||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(e,t){e.setCookie=function(e){var t=e.name+"="+escape(e.value);e.expires&&(t+="; expires="+e.expires.toGMTString()),e.path?t+="; path="+escape(e.path):t+="; path=/",e.domain&&(t+="; domain="+escape(e.domain)),e.secure&&(t+="; secure"),document.cookie=t},e.getCookie=function(e){var n=document.cookie.match("(^|;) ?"+e.name+"=([^;]*)(;|$)");return n?unescape(n[2]):t},e.deleteCookie=function(t){t.value="",t.expires=new Date("Thu, 01 Jan 1970 00:00:01 GMT"),e.setCookie(t)}})(e.Common.Cookie=e.Common.Cookie||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(t,n){t.validateRequired=function(t){!t.target[t.prop]&&t.target[t.prop]!=0&&e.Common.Array.isArray(t.target[t.prop])&&t.target[t.prop].length<=0&&e.Error.raise({code:e.Error.Codes.MANDATORY_PROPERTY,target:t.target,info:{property:t.prop}})}})(e.Common.Validator=e.Common.Validator||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(t,n){t.toBoolean=function(e){return typeof e=="undefined"?e:/^true|1|yes$/i.test(e)},t.toNumber=function(t){if(typeof t=="undefined")return t;if(typeof t=="number")return t;if(typeof t=="string")return e.Common.String.trim(t)==""?0:window.Number(t)}})(e.Common.Converter=e.Common.Converter||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(e,t){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};e.guidGenerator=function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},e.idGenerator=function(){return n()+n()}})(e.Common.Util=e.Common.Util||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){(function(e,t){e.proxy=function(e,t){if(typeof e=="function"&&typeof t=="object")return function(){return e.apply(t,arguments)}},e.parse=function(e){if(typeof e=="function")return e;if(typeof e!="string")return null;var t="",n="return "+e+"(";if(arguments.length!=1){for(var r=1;r<arguments.length;++r)t+=arguments[r]+",";t=t.substring(0,t.length-1)}return n+=t+");",new window.Function(t,n)}})(e.Common.Function=e.Common.Function||{})})(e.Common=e.Common||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r={},i=function(e){for(var t in r)if(r[t].id===e)return r[t];return n},s={add:function(e){var t=e.connection.id;this.bConnections[t]||(this.bConnections[t]=[],e.connection.bind({connect:this.send})),this.bConnections[t].push(e.message)},bConnections:{},send:function(e){var t=s.bConnections[e.target.id],r=e.target;for(var i=0;i<t.length;++i)r.send(t[i]);r.unbind({connect:s.send}),s.bConnections[e.target.id]=n}};t.create=function(t){return t.attribute=function(t){return e.Common.Object.insensitiveGetter(this,t)},this.add(new this.Connection(t))},t.add=function(n){if(this.getById(n.id))throw new e.Error({code:e.Error.Codes.CONNECTION_DUPLICATE,target:n});return this.Connections.push(n.id),this.fire({connectionCreate:{connection:n}}),r[n.internalId]=n,n.bind({xrtmlMessage:function(e){t.fire({xrtmlMessage:{connection:e.target,channel:e.channel,message:e.message}})}}),n.bind({dispose:function(e){var n=e.target.internalId,i=r[n];r[n]=null,delete r[n];for(var s=0,o=t.Connections,u=o.length;s<u;s++)if(o[s]===e.target.id){o.splice(s,1);break}t.fire({connectionDispose:{connection:e.target}})}}),n},t.getById=function(e){return r[e]||i(e)},t.dispose=function(t){var n=this.getById(t);n?n.dispose():e.Console.warn("ConnectionManager: Connection "+t+" was not found.")},t.addChannel=function(t){var n=this.getById(t.connectionId);typeof n=="undefined"&&(n=this.getConnectionById(t.connectionId),n===null&&e.Error.raise({code:e.Error.Codes.CONNECTION_NOT_FOUND,target:this,info:{className:"xRTML.ConnectionManager",methodName:"addChannel"}})),n.createChannel(t)},t.sendMessage=function(t){var n=null;for(var r=0;r<t.connections.length;++r)n=this.getById(t.connections[r]),n?n.isConnected()?n.send(t):(s.add({connection:n,message:{channel:t.channel,content:t.content,sendOnly:t.sendOnly}}),e.Console.debug("ConnectionManager: Connection with id "+t.connections[r]+" is not connected. Buffering message:"),e.Console.debug(t)):e.Error.raise({code:e.Error.Codes.CONNECTION_NOT_FOUND,target:this,info:{className:"xRTML.ConnectionManager",methodName:"sendMessage"}})},t.Connections=[],e.Event.extend(t)})(e.ConnectionManager=e.ConnectionManager||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){t.Connection=function(t){var n=null,r=!0;e.Event.extend(this),this.internalId=e.Common.Util.guidGenerator(),this.id=t.attribute("id")||this.internalId,this.appKey=t.attribute("appKey"),this.authToken=t.attribute("authToken"),this.sendRetries=parseInt(t.attribute("sendRetries"))||5,this.sendInterval=parseInt(t.attribute("sendInterval"))||1e3,this.timeout=t.attribute("timeout")||e.Config.connectionTimeout,this.connectAttempts=t.attribute("connectAttempts")||e.Config.connectionAttempts,this.connectionAttemptsCounter=0,this.autoConnect=t.attribute("autoConnect")?e.Common.Converter.toBoolean(t.attribute("autoConnect")):!0,this.metadata=t.attribute("metadata"),this.serverType=t.attribute("serverType")||"IbtRealTimeSJ",this.url=t.attribute("url")||e.Console.error("Connection "+(this.id||this.internalId)+": ORTC Server URL must be set."),this.isCluster=t.attribute("isCluster")?e.Common.Converter.toBoolean(t.attribute("isCluster")):!0,this.announcementSubChannel=t.attribute("announcementSubChannel"),this.channels={};var i=e.Common.Function.parse,s=e.Common.Function.proxy;this.messageAdapter=i(t.attribute("messageAdapter"),"message"),this.bind({create:i(t.attribute("onCreate"),"e"),connect:i(t.attribute("onConnect"),"e"),disconnect:i(t.attribute("onDisconnect"),"e"),subscribe:i(t.attribute("onSubscribe"),"e"),unsubscribe:i(t.attribute("onUnsubscribe"),"e"),exception:i(t.attribute("onException"),"e"),reconnect:i(t.attribute("onReconnect"),"e"),reconnecting:i(t.attribute("onReconnecting"),"e"),message:i(t.attribute("onMessage"),"e"),dispose:i(t.attribute("onDispose"),"e")});var o=s(function(e,t,n){this.process({channel:t,message:n})},this),u=function(t){n=t.createClient(),n.setId(this.internalId),n.setConnectionTimeout(this.timeout),n.setConnectionMetadata(this.metadata),n.setAnnouncementSubChannel(this.announcementSubChannel),this.isCluster?n.setClusterUrl(this.url):n.setUrl(this.url),n.onConnected=s(function(e){for(var t in this.channels){var n=this.channels[t];n.subscribe&&e.subscribe(n.name,n.subscribeOnReconnect,o)}this.fire({connect:{}})},this),n.onDisconnected=s(function(e){this.fire({disconnect:{}})},this),n.onSubscribed=s(function(e,t){this.channels[t].fire({subscribe:{}}),this.fire({subscribe:{channel:t}})},this),n.onUnsubscribed=s(function(e,t){var n=this.channels[t];delete this.channels[t],n.fire({unsubscribe:{}}),this.fire({unsubscribe:{channel:t}})},this),n.onException=s(function(t,n){this.fire({exception:{message:n}}),e.Error.raise({code:e.Error.Codes.ORTC_EXCEPTION,info:{className:"ORTCClient",methodName:"onException",message:n}})},this),n.onReconnected=s(function(e){this.connectionAttemptsCounter=0,this.fire({reconnect:{}})},this),n.onReconnecting=s(function(e){this.connectionAttemptsCounter>=this.connectAttempts?e.disconnect():(this.connectionAttemptsCounter++,this.fire({reconnecting:{}}))},this),this.fire({create:{}}),this.autoConnect&&n.connect(this.appKey,this.authToken)},a=function(t,n){this.isCreated()&&this.isConnected()?this.send(t):++n<=this.sendRetries?(setTimeout(s(function(){s(a,this)(t,n)},this),this.sendInterval),e.Console.debug("Message "+t.content+" not sent to channel "+t.channel+". Retry "+n+"/"+this.sendRetries+" in "+this.sendInterval/1e3+" seconds.")):e.Console.debug("Message "+t.content+" not sent to channel "+t.channel+". Discarding message.")};this.active=function(t){return t?(r=e.Common.Converter.toBoolean(t),r):r},this.dispose=function(){this.isConnected()&&this.disconnect(),this.fire({dispose:{}})},this.createChannel=function(t){t.attribute=function(t){return e.Common.Object.insensitiveGetter(this,t)};var n={connectionId:t.attribute("connectionId")||this.id,name:t.attribute("name"),subscribeOnReconnect:t.attribute("subscribeOnReconnect")?e.Common.Converter.toBoolean(t.attribute("subscribeOnReconnect")):!0,subscribe:t.attribute("subscribe")?e.Common.Converter.toBoolean(t.attribute("subscribe")):!0,messageAdapter:i(t.attribute("messageAdapter","message"))};return e.Event.extend(n),n.bind({message:i(t.attribute("onMessage"),"e"),subscribe:i(t.attribute("onSubscribe"),"e"),unsubscribe:i(t.attribute("onUnsubscribe"),"e")}),this.channels[t.name]=n,this.fire({channelCreate:{channel:n}}),n},this.process=function(t){var n=t.channel,r=t.message;if(r.substring(0,15)=="_X_SEND_ONLY_X_"){var i=r.substring(15,51);if(this.internalId==i)return;r=r.substring(54)}if(this.active()){try{this.messageAdapter&&(r=this.messageAdapter(r)),this.channels[n]&&this.channels[n].messageAdapter&&(r=this.channels[n].messageAdapter(r))}catch(s){e.Error.raise({code:e.Error.Codes.CONNECTION_ADAPT,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"process",originalMessage:r,message:s.message}})}var o=r;this.channels[n].fire({message:{message:o}}),this.fire({message:{channel:n,message:o}}),e.MessageManager.isValid(r)&&(o=e.MessageManager.toJson(r).xrtml,this.fire({xrtmlMessage:{message:o,channel:n}}))}else e.Console.debug("Connection "+(this.id||this.internalId)+" : Not active. Message received wasn't processed.")},this.send=function(t){var r=t.channel,i=t.content;typeof i=="object"&&(i=i.stringify());if(this.isCreated()&&this.isConnected())if(this.active()){t.sendOnly&&(i="_X_SEND_ONLY_X_"+this.internalId+"_X_"+i),n.send(r,i);var o;try{o=e.JSON.parse(i)}catch(u){o=i}e.Console.debug("Connection "+(this.id||this.internalId)+": Message sent to channel "+r),e.Console.debug(o)}else e.Console.debug("Connection "+(this.id||this.internalId)+": Not active. Message not sent to channel "+r),e.Console.debug(i);else setTimeout(s(function(){s(a,this)(t,0)},this),this.sendInterval),e.Console.debug("Connection "+(this.id||this.internalId)+": Not ready. Message not sent to channel "+r+". Retrying in "+this.sendInterval/1e3+" seconds."),e.Console.debug(i)},this.connect=function(t){this.isCreated()?(t&&(this.appKey=t.appKey,this.authToken=t.authToken),n.connect(this.appKey,this.authToken)):e.Error.raise({code:e.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"connect"}})},this.disconnect=function(){this.isConnected()?n.disconnect():e.Error.raise({code:e.Error.Codes.ORTC_DISCONNECTED,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"disconnect"}})},this.subscribe=function(e){e=this.createChannel(e),n.subscribe(e.name,e.subscribeOnReconnect,o)},this.unsubscribe=function(e){n.unsubscribe(e)},this.isCreated=function(){return n!=null},this.isConnected=function(){return this.isCreated()?n.getIsConnected():!1},this.isSubscribed=function(e){return this.isConnected()?n.isSubscribed(e):!1},this.getMetadata=function(){return this.isCreated()?n.getConnectionMetadata():e.Error.raise({code:e.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"getMetadata"}})},this.setMetadata=function(t){return this.isCreated()?n.setConnectionMetadata(t):e.Error.raise({code:e.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"setMetadata"}})},this.getAnnouncementSubChannel=function(){return this.isCreated()?n.getAnnouncementSubChannel():e.Error.raise({code:e.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"getAnnouncementSubChannel"}})},this.getProtocol=function(){return this.isConnected()?n.getProtocol():e.Error.raise({code:e.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"getProtocol"}})},this.setProtocol=function(e){this.isCreated()&&n.setProtocol(e)},typeof loadOrtcFactory!="undefined"?loadOrtcFactory(this.serverType,s(u,this)):e.bind({ready:s(function(){s(loadOrtcFactory,this)(this.serverType,s(u,this))},this)});if(t.attribute("channels")){var f=t.attribute("channels");for(var l=0;l<f.length;++l)this.createChannel(f[l])}}})(e.ConnectionManager=e.ConnectionManager||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r={},i=function(t){for(var i in r)if(r[i].id===t)return r[i];return e.Console.warn("Storage with id: "+t+" was not found."),n};t.create=function(n){try{var i=new t[n.type||"KeyValuePairStorage"],s=t.BaseStorage.extend(i);return n.attribute=function(t){return e.Common.Object.insensitiveGetter(n,t)},s=new s(n),s.bind({dispose:function(e){var n=e.target.internalId,i=r[n];r[n]=null,delete r[n],t.fire({storagedispose:{storage:e.target}})}}),r[s.internalId]=s,t.fire({storagecreate:{storage:s}}),s}catch(o){e.Error.raise({code:e.Error.Codes.UNEXPECTED,info:{message:o.message,className:"xRTML.StorageManager",methodName:"create"}})}},t.getById=function(e){return r[e]||i(e)},e.Event.extend(t)})(e.StorageManager=e.StorageManager||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r=function(){this.init=function(t){e.Event.extend(this),this.internalId=e.Common.Util.guidGenerator(),this.id=t.attribute("id")||this.internalId,this.type=t.attribute("type")||"KeyValuePairStorage",this.isReady=!1;var n=t.attribute("autoConnect");this.autoConnect=typeof n!="undefined"?e.Common.Converter.toBoolean(n):!0,this.dispose=function(){this.fire({dispose:{}})},this.bind({ready:e.Common.Function.parse(t.attribute("onready")),exception:e.Common.Function.parse(t.attribute("onexception"))})}};t.BaseStorage=e.Class.extend(new r)})(e.StorageManager=e.StorageManager||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r=function(){this.init=function(t){this._super(t);var n=t.attribute("baseUrl");this.baseUrl=n?n[n.length-1]=="/"?n.substring(0,n.length-1):n:null,e.Common.Validator.validateRequired({target:this,prop:"baseUrl"}),this.connectionId=t.attribute("connectionId"),this.sessionId=t.attribute("sessionId");var r=t.attribute("operationsTimeout");this.operationsTimeout=r?r:2e3,this.bind({session:e.Common.Function.parse(t.attribute("onsession"))}),this.autoConnect&&this.openConnection()};var t={},r=[],i={get:"readRequestChannel",set:"writeRequestChannel",del:"writeRequestChannel",incr:"writeRequestChannel"},s={readRequestChannel:n,readResponseChannel:n,writeRequestChannel:n,writeResponseChannel:n},o;this.set=function(e,t){u.call(this,{data:e,action:"set",callback:t})},this.del=function(e,t){u.call(this,{data:e,action:"del",callback:t})},this.incr=function(e,t){u.call(this,{data:e,action:"incr",callback:t})},this.get=function(e,t){u.call(this,{data:e,action:"get",callback:t})};var u=function(n){if(this.isReady){var u=e.Common.Util.guidGenerator();t[u]={callback:n.callback,timeout:setTimeout(e.Common.Function.proxy(function(){e.Error.raise({code:e.Error.Codes.STORAGE_OPERATION_TIMEOUT,target:this,info:{opId:u,timeout:this.operationsTimeout,className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"performRemoteDataOperation (internal method, no docs available)"}})},this),this.operationsTimeout)};var a=n.data;a.namespaceExpire=a.namespaceExpire||31556926,a.opId=u;var f=e.MessageManager.create({action:n.action,data:a,senderId:this.internalId});o.send({channel:s[i[n.action]],content:f})}else r.push(n),e.Console.warn("Storage operation placed in buffer. Will only be called when the Storage is ready.")},a=function(e){var n=e.data,r=n.opId;n.opId=null,delete n.opId;var i={success:e.success,data:e.success?n:null,error:e.success?null:e.data.error};t[r]&&t[r].callback&&t[r].callback(i),clearTimeout(t[r].timeout),t[r]=null,delete t[r]};this.getSession=function(t){e.Common.Request.post({url:this.baseUrl+"/getStorageSession",data:t,crossDomain:!0,success:e.Common.Function.proxy(function(n){var r;try{r=e.JSON.parse(n)}catch(i){e.Error.raise({code:e.Error.Codes.JSON_PARSE,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"getSession",message:i.message}})}this.sessionId=r.sessionId,this.fire({session:{sessionId:this.sessionId}}),t.autoConnect&&this.openConnection()},this),error:e.Common.Function.proxy(function(t){e.Error.raise({code:e.Error.Codes.STORAGE_SESSION,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"getSession",message:t}})},this)})},this.openConnection=function(){if(this.sessionId)e.Common.Request.post({url:this.baseUrl+"/openStorageConnection",data:{sessionId:this.sessionId},crossDomain:!0,success:e.Common.Function.proxy(function(t){function c(t){t.bind({xrtmlMessage:e.Common.Function.proxy(function(e){if(e.channel==s.readResponseChannel||e.channel==s.writeResponseChannel){var t=e.message;a.call(this,{success:t.action=="exception"?!1:!0,data:t.data})}},this)});var n=!1,i=!1;t.bind({subscribe:e.Common.Function.proxy(function(e){e.channel==s.readResponseChannel&&(n=!0),e.channel==s.writeResponseChannel&&(i=!0);if(n&&i){this.isReady=!0;for(var t=0,o=r.length;t<o;t++)u.call(this,r[t]);r=[],this.fire({ready:{}})}},this)}),t.subscribe({name:s.readResponseChannel}),t.subscribe({name:s.writeResponseChannel})}var n;try{n=e.JSON.parse(t)}catch(i){e.Error.raise({code:e.Error.Codes.JSON_PARSE,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"openConnection",message:i.message}})}s.readRequestChannel=n.channels.readRequestChannel,s.readResponseChannel=n.channels.readResponseChannel,s.writeRequestChannel=n.channels.writeRequestChannel,s.writeResponseChannel=n.channels.writeResponseChannel;if(!this.connectionId){var f={appKey:n.appKey,authToken:n.authToken,url:n.url,isCluster:n.isCluster,serverType:n.serverType};o=e.ConnectionManager.create(f)}else o=e.ConnectionManager.getById(this.connectionId);if(o.isConnected())c.call(this,o);else if(o.autoConnect)o.bind({connect:e.Common.Function.proxy(function(e){c.call(this,e.target)},this)});else{o.bind({connect:e.Common.Function.proxy(function(e){c.call(this,e.target)},this)});function p(e){!e.appKey&&!e.authToken&&(e.appKey=n.appKey,e.authToken=n.authToken),e.connect()}o.isCreated()?p.call(this,o):o.bind({create:e.Common.Function.proxy(function(e){p.call(this,e.target)},this)})}},this),error:e.Common.Function.proxy(function(t){e.Error.raise({code:e.Error.Codes.REQUEST_FAILURE,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"openConnection",message:t}})},this)});else{o=e.ConnectionManager.getById(this.connectionId);if(!o)e.Error.raise({code:e.Error.Codes.STORAGE_CONNECTION_UNAVAILABLE,target:this,info:{connectionId:this.connectionId,className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"openConnection"}});else{var t={appKey:o.appKey,serverUrl:o.url,isCluster:o.isCluster,serverType:o.serverType,timeToLive:900,authenticate:!1,autoConnect:!0};this.getSession(t)}}}};t.KeyValuePairStorage=r})(e.StorageManager=e.StorageManager||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r={},i={},s=null,o=function(t){for(var i in r)if(r[i].id===t)return r[i];return e.Console.log("Tag with id: "+t+" was not found."),n},u=function(e){if(e.base!="Tag"){var t=u(new i[e.base]);e=t.extend(e)}else e=s.extend(e);return e},a=function(t){return e.Common.Object.insensitiveGetter(this,t)},f=[];if(!e.domLoaded()){function l(){var t;for(var n=0;n<f.length;++n)t=f[n],e.Console.debug("TagManager: Creating a "+t.tagObject.name+" tag after the HTML page has been fully loaded."),e.TagManager.create(t.tagObject,t.fn);f=[],e.Event.unbind(window,{load:l})}e.Event.bind(window,{load:l})}t.register=function(t){var n=t.name;n?n!="Tag"?i[n]||(t.base||(t.base="Tag"),i[n]=t.struct,i[n].prototype.base=t.base,i[n].prototype.name=t.name,i[n].prototype["abstract"]=t["abstract"]||!1):s=t.struct:e.Error.raise({code:e.Error.Codes.TAG_INVALID_CONFIG,target:this,info:{message:"Please provide the tag name.",className:"xRTML.TagManager",methodName:"register"}})},t.create=function(n,o){try{if((n.target||n.template)&&!e.domLoaded()){f.push({tagObject:n,fn:o}),e.Console.debug("TagManager: Creating a "+n.name+" tag was postponed until HTML page has been fully loaded.");return}n.attribute=a;if(!i[n.name])throw e.Error.raise({code:e.Error.Codes.TAG_UNREGISTERED,info:{tagName:n.name,className:"xRTML.TagManager",methodName:"create"}});var l=new i[n.name];if(!!l["abstract"])throw e.Error.raise({code:e.Error.Codes.TAG_ABSTRACT,target:this,info:{tag:l,className:"xRTML.TagManager",methodName:"create"}});var h=l.base=="Tag"?s.extend(l):u(l);h=new h(n),h.fire({postInit:{}}),h.bind({dispose:function(e){var n=e.target.internalId,i=r[n];r[n]=null,delete r[n],t.fire({tagDispose:{tag:e.target}})}}),r[h.internalId]=h,t.fire({tagCreate:{tag:h}}),o&&o(h)}catch(p){e.Error.raise({code:e.Error.Codes.TAG_NOT_CREATED,target:this,info:{id:n.id,className:"xRTML.TagManager."+n.name,methodName:"init",message:p.message,tagConfig:n}})}},t.getById=function(e){return r[e]||o(e)},t.getClasses=function(){var e=[];for(var t in i)e.push(t);return e},e.Event.extend(t),e.DomParser.bind({tagsLoad:function(e){var n=e.tags;for(var r=0;r<n.length;++r)t.create(n[r])}})})(e.TagManager=e.TagManager||{})}(window.xRTML=window.xRTML||{}),xRTML.TagManager.register({name:"Tag","abstract":!0,struct:xRTML.Class.extend(new function(){this.init=function(e){xRTML.Event.extend(this);var t=xRTML.Common.Function.parse;this.bind({preInit:t(e.attribute("onPreInit")),postInit:t(e.attribute("onPostInit")),active:t(e.attribute("onActive")),preProcess:t(e.attribute("onPreProcess")),postProcess:t(e.attribute("onPostProcess")),dispose:t(e.attribute("onDispose"))}),this.fire({preInit:{}}),this.internalId=xRTML.Common.Util.guidGenerator(),this.id=e.attribute("id")||this.internalId,this.connections=e.attribute("connections")||[],this.channelId=e.attribute("channelId"),this.triggers=e.attribute("triggers")||[],this.receiveOwnMessages=!!e.attribute("receiveOwnMessages"),this.target=function(){var t=xRTML.Sizzle(e.attribute("target"));return t.length==0&&t.push(document.body),t}(),this.active=e.attribute("active")?xRTML.Common.Converter.toBoolean(e.attribute("active")):!0},this.activate=function(e){this.active=xRTML.Common.Converter.toBoolean(e.active),this.fire({active:{value:this.active}})},this.process=function(e){},this.sendMessage=function(e){xRTML.ConnectionManager.sendMessage({connections:e.connectionId?[e.connectionId]:this.connections,channel:e.channel||this.channelId,content:xRTML.MessageManager.create({trigger:e.trigger?[e.trigger]:this.triggers,action:e.action,data:e.data,senderId:this.internalId})})},this.dispose=function(){this.target=null,this.fire({dispose:{}})},this.registerTrigger=function(e){xRTML.MessageBroker.registerTrigger({name:e,tagId:this.internalId})},this.unregisterTrigger=function(e){xRTML.MessageBroker.unregisterTrigger({name:e,tagId:this.internalId})}})}),function(e,t){(function(t,n){var r={},i=function(t){if(r[t.name])for(var n in r[t.name]){var i=e.TagManager.getById(n),s=t.message;if(i.active||s.data.action=="activate"){if(i.receiveOwnMessages||!s.senderId||i.internalId!==s.senderId){var o=s.data,u=s.action;i.fire({preProcess:o}),u?i[u]?i[u].call(i,o):e.Error.raise({code:e.Error.Codes.TAG_ACTION_UNDEFINED,target:i,info:{action:u,className:"xRTML.MessageBroker",methodName:"triggerCall (internal method, no docs available)"}}):i.process(o),i.fire({postProcess:o})}}else e.Error.raise({code:e.Error.Codes.TAG_INACTIVE,target:i,className:"xRTML.MessageBroker",methodName:"triggerCall (internal method, no docs available)"})}else e.Console.debug("Trigger "+t.name+" is not registered with any xRTML Tag.")},s=function(e){var n=e.tag,r;for(var i=0;i<n.triggers.length;++i)r=n.triggers[i],t.registerTrigger({tagId:n.internalId,name:r})},o=function(e){var n=e.tag,r;for(var i=0;i<n.triggers.length;++i)r=n.triggers[i],t.unregisterTrigger({tagId:n.internalId,name:r})},u=function(e){var t=e.message.trigger;if(typeof t=="string")i({name:t,message:e.message});else if(t instanceof Array)for(var n=0;n<t.length;++n)e.message.trigger=t[n],i({name:t[n],message:e.message})};t.registerTrigger=function(e){r[e.name]||(r[e.name]={}),r[e.name][e.tagId]=n,t.fire({triggerRegister:{trigger:e}})},t.unregisterTrigger=function(n){var i=r[n.name];if(!i){e.Console.warn("The trigger "+n.name+" is not registered.");return}i.hasOwnProperty(n.tagId)?(delete r[n.name][n.tagId],e.Common.Object.keys(i).length||delete r[n.name],t.fire({triggerUnregister:{trigger:n}})):e.Console.warn("The tag "+n.tagId+" is not listening to messages with the trigger "+n.name+".")},e.Event.extend(t),e.TagManager.bind({tagCreate:s,tagDispose:o}),e.ConnectionManager.bind({xrtmlMessage:u})})(e.MessageBroker=e.MessageBroker||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){t.isValid=function(t){try{if(typeof t=="string"){var n=t.substring(t.indexOf('"'),t.indexOf('"',t.indexOf('"')+1)+1);return'"xrtml"'!=e.Common.String.trim(n)?!1:(e.JSON.parse(t),!0)}return typeof t=="object"&&t.xrtml?!0:!1}catch(r){e.Error.raise({code:e.Error.Codes.INVALID_MESSAGE,target:this,message:r.message,info:{className:"xRTML.MessageManager",methodName:"isValid"}})}},t.toJson=function(n){if(typeof n=="string"&&t.isValid(n)){var r=e.JSON.parse(n).xrtml,i={xrtml:{senderId:r.s,trigger:r.t,action:r.a,data:r.d}};return i}return n},t.stringify=function(t){var n={xrtml:{s:t.senderId,t:t.trigger,a:t.action,d:t.data&&typeof t.data!="object"?e.JSON.parse(t.data):t.data}};return e.JSON.stringify(n)},t.create=function(n){return n.data=n.data&&typeof n.data!="object"?e.JSON.parse(n.data):n.data,n.stringify=function(){return t.stringify(this)},n}})(e.MessageManager=e.MessageManager||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r=function(t,n){if(e.Config.remoteTrace){var r=null;try{r=e.JSON.stringify(n)}catch(i){}var s=e.MessageManager.create({data:{message:t,content:r}});e.ConnectionManager.sendMessage(e.TraceMonitor.channelId,s)}};t.channelId="trace",e.Console.bind({error:function(e){r("Error",e.error)}}),e.ConnectionManager.bind({connectionCreate:function(t){var n=t.connection;r("Connection found: \n AppKey: "+n.appKey+" \n AuthToken: "+n.authToken+" \n Url: "+n.url,n),n.bind({create:function(t){var n="Connection "+t.target.id+" created. "+(t.target.autoConnect?"Connecting...":"Waiting for explicit connect...");e.Console.debug(n),r(n,t.target)},connect:function(t){var n="Connection "+t.target.id+" established. Using "+t.target.getProtocol()+" protocol.";e.Console.debug(n),r(n,t.target)},disconnect:function(t){var n="Connection "+t.target.id+" closed.";e.Console.debug(n),r(n,t.target)},subscribe:function(t){var n="Connection "+t.target.id+": Channel "+t.channel+" subscribed.";e.Console.debug(n),r(n,t.target)},unsubscribe:function(t){var n="Connection "+t.target.id+": Channel "+t.channel+" unsubscribed.";e.Console.debug(n),r(n,t.target)},exception:function(t){var n="Connection "+t.target.id+" threw an exception: "+t.event;e.Console.debug(n),r(n,t.target)},reconnect:function(t){var n="Connection "+t.target.id+" is restored. Using "+t.target.getProtocol()+" protocol.";e.Console.debug(n),r(n,t.target)},reconnecting:function(t){var n="Connection "+t.target.id+" was lost. ";t.target.connectionAttemptsCounter>=t.target.connectAttempts?n+="Maximum number of attempts reached: "+t.target.connectAttempts+" Stop trying to reconnect.":n+="Trying to reconnect. Attempt "+t.target.connectionAttemptsCounter+" out of "+t.target.connectAttempts,e.Console.debug(n),r(n,t.target)},message:function(t){var n="Connection "+t.target.id+": Message received from channel "+t.channel,i;try{i=e.JSON.parse(t.message)}catch(s){i=t.message}e.Console.debug(n),e.Console.debug(i),r(i,t.target)},xrtmlMessage:function(t){var n="Connection "+t.target.id+": xRTML Message received from channel "+t.channel;e.Console.debug(n),e.Console.debug(t.message),r(t.message,t.target)}})}});var i=function(t){var n="Tag "+t.target.id+": "+t.type+" message";e.Console.debug(n),e.Console.debug(t.data),r(n,t.data)};e.TagManager.bind({tagCreate:function(t){var n=t.tag;e.Console.debug("Tag of type "+n.name+" created with id "+(n.id||n.internalId)),e.Console.debug(n),n.bind({init:function(t){e.Console.debug("")},load:function(t){e.Console.debug("")},active:function(t){e.Console.debug("")},process:i,preProcess:i,postProcess:i})},tagDispose:function(t){var n=t.tag,i="Tag of type "+t.name+" with id "+(n.id||n.internalId)+" disposed.";e.Console.debug(i),r(i,t.tag)}}),e.MessageBroker.bind({triggerRegister:function(t){var n="Tag "+t.trigger.tagId+" registered trigger: "+t.trigger.name;e.Console.debug(n),r(n,t.target)},triggerUnregister:function(t){var n="Tag "+t.trigger.tagId+" unregistered trigger: "+t.trigger.name;e.Console.debug(n),r(n,t.target)}}),e.DomParser.bind({configLoad:function(t){e.Console.debug("DOM Parser: the following connections were read from DOM: "),e.Console.debug(t.config.connections),e.Console.debug("DOM Parser: the following storages were read from DOM: "),e.Console.debug(t.config.storages)},tagsLoad:function(t){e.Console.debug("DOM Parser: the following tags were read from DOM: "),e.Console.debug(t.tags)}})})(e.TraceMonitor=e.TraceMonitor||{})}(window.xRTML=window.xRTML||{}),function(e,t){var n=function(){e.isReady=!0,e.fire({ready:{}})};typeof loadOrtcFactory=="undefined"?e.Config.ortcLibrary((document.location.protocol=="file:"?"http:":document.location.protocol)+"//dfdbz2tdq3k01.cloudfront.net/js/2.1.0/ortc.js",n):n();var r=function(){e.DomParser.read(),e.isReady?(e.isLoaded=!0,e.fire({load:{}})):e.ready(function(){e.isLoaded=!0,e.fire({load:{}})})};e.domLoaded()?r():e.Event.bind(window,{load:r})}(window.xRTML=window.xRTML||{}),function(e,t){(function(t,n){var r=n;(function(e,t,n,i){var s=!0;!function(e){e(r={})}(function(r){function u(e){var t=this;if(e)for(var n in e){var r=o.extenders[n];typeof r=="function"&&(t=r(t,e[n]))}return t}function d(e,t,n){n&&t!==o.selectExtensions.readValue(e)&&o.selectExtensions.writeValue(e,t),t!==o.selectExtensions.readValue(e)&&o.utils.triggerEvent(e,"change")}var o=typeof r!="undefined"?r:{};o.exportSymbol=function(e,t){var n=e.split("."),r=o;for(var i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},o.exportProperty=function(e,t,n){e[t]=n},o.version="2.1.0",o.exportSymbol("version",o.version),o.utils=new function(){function y(e,t){if(o.utils.tagNameLower(e)!=="input"||!e.type)return!1;if(t.toLowerCase()!="click")return!1;var n=e.type;return n=="checkbox"||n=="radio"}var r=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,s={},u={},a=/Firefox\/2/i.test(n.userAgent)?"KeyboardEvent":"UIEvents";s[a]=["keyup","keydown","keypress"],s.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var f in s){var l=s[f];if(l.length)for(var c=0,p=l.length;c<p;c++)u[l[c]]=f}var d={propertychange:!0},v=function(){var e=3,n=t.createElement("div"),r=n.getElementsByTagName("i");while(n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",r[0]);return e>4?e:i}(),m=v===6,g=v===7;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n])},arrayIndexOf:function(e,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r]))return e[r];return null},arrayRemoveItem:function(e,t){var n=o.utils.arrayIndexOf(e,t);n>=0&&e.splice(n,1)},arrayGetDistinctValues:function(e){e=e||[];var t=[];for(var n=0,r=e.length;n<r;n++)o.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t(e[r]));return n},arrayFilter:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)t(e[r])&&n.push(e[r]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},emptyDomNode:function(e){while(e.firstChild)o.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){var n=o.utils.makeArray(e),r=t.createElement("div");for(var i=0,s=n.length;i<s;i++)o.cleanNode(n[i]),r.appendChild(n[i]);return r},setDomNodeChildren:function(e,t){o.utils.emptyDomNode(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){var r=n[0],i=r.parentNode;for(var s=0,u=t.length;s<u;s++)i.insertBefore(t[s],r);for(var s=0,u=n.length;s<u;s++)o.removeNode(n[s])}},setOptionNodeSelectionState:function(e,t){n.userAgent.indexOf("MSIE 6")>=0?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return(e||"").replace(r,"")},stringTokenize:function(e,t){var n=[],r=(e||"").split(t);for(var i=0,s=r.length;i<s;i++){var u=o.utils.stringTrim(r[i]);u!==""&&n.push(u)}return n},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},buildEvalWithinScopeFunction:function(e,t){var n="return ("+e+")";for(var r=0;r<t;r++)n="with(sc["+r+"]) { "+n+" } ";return new Function("sc",n)},domNodeIsContainedBy:function(e,t){if(t.compareDocumentPosition)return(t.compareDocumentPosition(e)&16)==16;while(e!=null){if(e==t)return!0;e=e.parentNode}return!1},domNodeIsAttachedToDocument:function(e){return o.utils.domNodeIsContainedBy(e,e.ownerDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},registerEventHandler:function(e,t,n){var r=v&&d[t];if(!r&&typeof jQuery!="undefined"){if(y(e,t)){var i=n;n=function(e,t){var n=this.checked;t&&(this.checked=t.checkedStateBeforeEvent!==!0),i.call(this,e),this.checked=n}}jQuery(e).bind(t,n)}else if(!r&&typeof e.addEventListener=="function")e.addEventListener(t,n,!1);else{if(typeof e.attachEvent=="undefined")throw new Error("Browser doesn't support addEventListener or attachEvent");e.attachEvent("on"+t,function(t){n.call(e,t)})}},triggerEvent:function(n,r){if(!n||!n.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if(typeof jQuery!="undefined"){var i=[];y(n,r)&&i.push({checkedStateBeforeEvent:n.checked}),jQuery(n).trigger(r,i)}else if(typeof t.createEvent=="function"){if(typeof n.dispatchEvent!="function")throw new Error("The supplied element doesn't support dispatchEvent");var s=u[r]||"HTMLEvents",o=t.createEvent(s);o.initEvent(r,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(o)}else{if(typeof n.fireEvent=="undefined")throw new Error("Browser doesn't support triggering events");y(n,r)&&(n.checked=n.checked!==!0),n.fireEvent("on"+r)}},unwrapObservable:function(e){return o.isObservable(e)?e():e},toggleDomNodeCssClass:function(e,t,n){var r=(e.className||"").split(/\s+/),i=o.utils.arrayIndexOf(r,t)>=0;if(n&&!i)e.className+=(r[0]?" ":"")+t;else if(i&&!n){var s="";for(var u=0;u<r.length;u++)r[u]!=t&&(s+=r[u]+" ");e.className=o.utils.stringTrim(s)}},setTextContent:function(e,t){var n=o.utils.unwrapObservable(t);if(n===null||n===i)n="";"innerText"in e?e.innerText=n:e.textContent=n,v>=9&&(e.style.display=e.style.display)},ensureSelectElementIsRenderedCorrectly:function(e){if(v>=9){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=o.utils.unwrapObservable(e),t=o.utils.unwrapObservable(t);var n=[];for(var r=e;r<=t;r++)n.push(r);return n},makeArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},isIe6:m,isIe7:g,ieVersion:v,getFormFields:function(e,t){var n=o.utils.makeArray(e.getElementsByTagName("input")).concat(o.utils.makeArray(e.getElementsByTagName("textarea"))),r=typeof t=="string"?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[];for(var s=n.length-1;s>=0;s--)r(n[s])&&i.push(n[s]);return i},parseJson:function(t){if(typeof t=="string"){t=o.utils.stringTrim(t);if(t)return e.JSON&&e.JSON.parse?e.JSON.parse(t):(new Function("return "+t))()}return null},stringifyJson:function(e,t,n){if(typeof JSON=="undefined"||typeof JSON.stringify=="undefined")throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(o.utils.unwrapObservable(e),t,n)},postJson:function(e,n,r){r=r||{};var i=r.params||{},s=r.includeFields||this.fieldsIncludedWithJsonPost,u=e;if(typeof e=="object"&&o.utils.tagNameLower(e)==="form"){var a=e;u=a.action;for(var f=s.length-1;f>=0;f--){var l=o.utils.getFormFields(a,s[f]);for(var c=l.length-1;c>=0;c--)i[l[c].name]=l[c].value}}n=o.utils.unwrapObservable(n);var p=t.createElement("form");p.style.display="none",p.action=u,p.method="post";for(var d in n){var v=t.createElement("input");v.name=d,v.value=o.utils.stringifyJson(o.utils.unwrapObservable(n[d])),p.appendChild(v)}for(var d in i){var v=t.createElement("input");v.name=d,v.value=i[d],p.appendChild(v)}t.body.appendChild(p),r.submitter?r.submitter(p):p.submit(),setTimeout(function(){p.parentNode.removeChild(p)},0)}}},o.exportSymbol("utils",o.utils),o.exportSymbol("utils.arrayForEach",o.utils.arrayForEach),o.exportSymbol("utils.arrayFirst",o.utils.arrayFirst),o.exportSymbol("utils.arrayFilter",o.utils.arrayFilter),o.exportSymbol("utils.arrayGetDistinctValues",o.utils.arrayGetDistinctValues),o.exportSymbol("utils.arrayIndexOf",o.utils.arrayIndexOf),o.exportSymbol("utils.arrayMap",o.utils.arrayMap),o.exportSymbol("utils.arrayPushAll",o.utils.arrayPushAll),o.exportSymbol("utils.arrayRemoveItem",o.utils.arrayRemoveItem),o.exportSymbol("utils.extend",o.utils.extend),o.exportSymbol("utils.fieldsIncludedWithJsonPost",o.utils.fieldsIncludedWithJsonPost),o.exportSymbol("utils.getFormFields",o.utils.getFormFields),o.exportSymbol("utils.postJson",o.utils.postJson),o.exportSymbol("utils.parseJson",o.utils.parseJson),o.exportSymbol("utils.registerEventHandler",o.utils.registerEventHandler),o.exportSymbol("utils.stringifyJson",o.utils.stringifyJson),o.exportSymbol("utils.range",o.utils.range),o.exportSymbol("utils.toggleDomNodeCssClass",o.utils.toggleDomNodeCssClass),o.exportSymbol("utils.triggerEvent",o.utils.triggerEvent),o.exportSymbol("utils.unwrapObservable",o.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),o.utils.domData=new function(){var e=0,t="__ko__"+(new Date).getTime(),n={};return{get:function(e,t){var n=o.utils.domData.getAll(e,!1);return n===i?i:n[t]},set:function(e,t,n){if(n===i&&o.utils.domData.getAll(e,!1)===i)return;var r=o.utils.domData.getAll(e,!0);r[t]=n},getAll:function(r,s){var o=r[t],u=o&&o!=="null";if(!u){if(!s)return i;o=r[t]="ko"+e++,n[o]={}}return n[o]},clear:function(e){var r=e[t];r&&(delete n[r],e[t]=null)}}},o.exportSymbol("utils.domData",o.utils.domData),o.exportSymbol("utils.domData.clear",o.utils.domData.clear),o.utils.domNodeDisposal=new function(){function r(t,n){var r=o.utils.domData.get(t,e);return r===i&&n&&(r=[],o.utils.domData.set(t,e,r)),r}function s(t){o.utils.domData.set(t,e,i)}function u(e){var t=r(e,!1);if(t){t=t.slice(0);for(var i=0;i<t.length;i++)t[i](e)}o.utils.domData.clear(e),typeof jQuery=="function"&&typeof jQuery.cleanData=="function"&&jQuery.cleanData([e]),n[e.nodeType]&&a(e)}function a(e){var t,n=e.firstChild;while(t=n)n=t.nextSibling,t.nodeType===8&&u(t)}var e="__ko_domNodeDisposal__"+(new Date).getTime(),t={1:!0,8:!0,9:!0},n={1:!0,9:!0};return{addDisposeCallback:function(e,t){if(typeof t!="function")throw new Error("Callback must be a function");r(e,!0).push(t)},removeDisposeCallback:function(e,t){var n=r(e,!1);n&&(o.utils.arrayRemoveItem(n,t),n.length==0&&s(e))},cleanNode:function(e){if(t[e.nodeType]){u(e);if(n[e.nodeType]){var r=[];o.utils.arrayPushAll(r,e.getElementsByTagName("*"));for(var i=0,s=r.length;i<s;i++)u(r[i])}}},removeNode:function(e){o.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)}}},o.cleanNode=o.utils.domNodeDisposal.cleanNode,o.removeNode=o.utils.domNodeDisposal.removeNode,o.exportSymbol("cleanNode",o.cleanNode),o.exportSymbol("removeNode",o.removeNode),o.exportSymbol("utils.domNodeDisposal",o.utils.domNodeDisposal),o.exportSymbol("utils.domNodeDisposal.addDisposeCallback",o.utils.domNodeDisposal.addDisposeCallback),o.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",o.utils.domNodeDisposal.removeDisposeCallback),function(){function r(n){var r=o.utils.stringTrim(n).toLowerCase(),i=t.createElement("div"),s=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],u="ignored<div>"+s[1]+n+s[2]+"</div>";typeof e.innerShiv=="function"?i.appendChild(e.innerShiv(u)):i.innerHTML=u;while(s[0]--)i=i.lastChild;return o.utils.makeArray(i.lastChild.childNodes)}function s(e){var t=jQuery.clean([e]);if(t&&t[0]){var n=t[0];while(n.parentNode&&n.parentNode.nodeType!==11)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}return t}var n=/^(\s*)<!--(.*?)-->/;o.utils.parseHtmlFragment=function(e){return typeof jQuery!="undefined"?s(e):r(e)},o.utils.setHtml=function(e,t){o.utils.emptyDomNode(e);if(t!==null&&t!==i){typeof t!="string"&&(t=t.toString());if(typeof jQuery!="undefined")jQuery(e).html(t);else{var n=o.utils.parseHtmlFragment(t);for(var r=0;r<n.length;r++)e.appendChild(n[r])}}}}(),o.exportSymbol("utils.parseHtmlFragment",o.utils.parseHtmlFragment),o.exportSymbol("utils.setHtml",o.utils.setHtml),o.memoization=function(){function t(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function n(){return t()+t()}function r(e,t){if(!e)return;if(e.nodeType==8){var n=o.memoization.parseMemoText(e.nodeValue);n!=null&&t.push({domNode:e,memoId:n})}else if(e.nodeType==1)for(var i=0,s=e.childNodes,u=s.length;i<u;i++)r(s[i],t)}var e={};return{memoize:function(t){if(typeof t!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var r=n();return e[r]=t,"<!--[ko_memo:"+r+"]-->"},unmemoize:function(t,n){var r=e[t];if(r===i)throw new Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return r.apply(null,n||[]),!0}finally{delete e[t]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];r(e,n);for(var i=0,s=n.length;i<s;i++){var u=n[i].domNode,a=[u];t&&o.utils.arrayPushAll(a,t),o.memoization.unmemoize(n[i].memoId,a),u.nodeValue="",u.parentNode&&u.parentNode.removeChild(u)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),o.exportSymbol("memoization",o.memoization),o.exportSymbol("memoization.memoize",o.memoization.memoize),o.exportSymbol("memoization.unmemoize",o.memoization.unmemoize),o.exportSymbol("memoization.parseMemoText",o.memoization.parseMemoText),o.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",o.memoization.unmemoizeDomNodeAndDescendants),o.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return o.dependentObservable({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},notify:function(e,t){return e.equalityComparer=t=="always"?function(){return!1}:o.observable.fn.equalityComparer,e}},o.exportSymbol("extenders",o.extenders),o.subscription=function(e,t,n){this.target=e,this.callback=t,this.disposeCallback=n,o.exportProperty(this,"dispose",this.dispose)},o.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},o.subscribable=function(){this._subscriptions={},o.utils.extend(this,o.subscribable.fn),o.exportProperty(this,"subscribe",this.subscribe),o.exportProperty(this,"extend",this.extend),o.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var a="change";o.subscribable.fn={subscribe:function(e,t,n){n=n||a;var r=t?e.bind(t):e,i=new o.subscription(this,r,function(){o.utils.arrayRemoveItem(this._subscriptions[n],i)}.bind(this));return this._subscriptions[n]||(this._subscriptions[n]=[]),this._subscriptions[n].push(i),i},notifySubscribers:function(e,t){t=t||a,this._subscriptions[t]&&o.utils.arrayForEach(this._subscriptions[t].slice(0),function(t){t&&t.isDisposed!==!0&&t.callback(e)})},getSubscriptionsCount:function(){var e=0;for(var t in this._subscriptions)this._subscriptions.hasOwnProperty(t)&&(e+=this._subscriptions[t].length);return e},extend:u},o.isSubscribable=function(e){return typeof e.subscribe=="function"&&typeof e.notifySubscribers=="function"},o.exportSymbol("subscribable",o.subscribable),o.exportSymbol("isSubscribable",o.isSubscribable),o.dependencyDetection=function(){var e=[];return{begin:function(t){e.push({callback:t,distinctDependencies:[]})},end:function(){e.pop()},registerDependency:function(t){if(!o.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");if(e.length>0){var n=e[e.length-1];if(o.utils.arrayIndexOf(n.distinctDependencies,t)>=0)return;n.distinctDependencies.push(t),n.callback(t)}}}}();var f={"undefined":!0,"boolean":!0,number:!0,string:!0};o.observable=function(e){function n(){if(arguments.length>0){if(!n.equalityComparer||!n.equalityComparer(t,arguments[0]))n.valueWillMutate(),t=arguments[0],s&&(n._latestValue=t),n.valueHasMutated();return this}return o.dependencyDetection.registerDependency(n),t}var t=e;return s&&(n._latestValue=t),o.subscribable.call(n),n.valueHasMutated=function(){n.notifySubscribers(t)},n.valueWillMutate=function(){n.notifySubscribers(t,"beforeChange")},o.utils.extend(n,o.observable.fn),o.exportProperty(n,"valueHasMutated",n.valueHasMutated),o.exportProperty(n,"valueWillMutate",n.valueWillMutate),n},o.observable.fn={equalityComparer:function(t,n){var r=t===null||typeof t in f;return r?t===n:!1}};var l=o.observable.protoProperty="__ko_proto__";o.observable.fn[l]=o.observable,o.hasPrototype=function(e,t){return e===null||e===i||e[l]===i?!1:e[l]===t?!0:o.hasPrototype(e[l],t)},o.isObservable=function(e){return o.hasPrototype(e,o.observable)},o.isWriteableObservable=function(e){return typeof e=="function"&&e[l]===o.observable?!0:typeof e=="function"&&e[l]===o.dependentObservable&&e.hasWriteFunction?!0:!1},o.exportSymbol("observable",o.observable),o.exportSymbol("isObservable",o.isObservable),o.exportSymbol("isWriteableObservable",o.isWriteableObservable),o.observableArray=function(e){arguments.length==0&&(e=[]);if(e===null||e===i||"length"in e){var t=o.observable(e);return o.utils.extend(t,o.observableArray.fn),t}throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},o.observableArray.fn={remove:function(e){var t=this(),n=[],r=typeof e=="function"?e:function(t){return t===e};for(var i=0;i<t.length;i++){var s=t[i];r(s)&&(n.length===0&&this.valueWillMutate(),n.push(s),t.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===i){var t=this(),n=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),n}return e?this.remove(function(t){return o.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this(),n=typeof e=="function"?e:function(t){return t===e};this.valueWillMutate();for(var r=t.length-1;r>=0;r--){var i=t[r];n(i)&&(t[r]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===i?this.destroy(function(){return!0}):e?this.destroy(function(t){return o.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return o.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this()[n]=t,this.valueHasMutated())}},o.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){o.observableArray.fn[e]=function(){var t=this();this.valueWillMutate();var n=t[e].apply(t,arguments);return this.valueHasMutated(),n}}),o.utils.arrayForEach(["slice"],function(e){o.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),o.exportSymbol("observableArray",o.observableArray),o.dependentObservable=function(e,t,n){function h(){o.utils.arrayForEach(c,function(e){e.dispose()}),c=[]}function b(){var e=E.throttleEvaluation;e&&e>=0?(clearTimeout(y),y=setTimeout(w,e)):w()}function w(){if(a)return;if(u&&v()){p();return}a=!0;try{var e=o.utils.arrayMap(c,function(e){return e.target});o.dependencyDetection.begin(function(t){var n;(n=o.utils.arrayIndexOf(e,t))>=0?e[n]=i:c.push(t.subscribe(b))});var n=f.call(t);for(var l=e.length-1;l>=0;l--)e[l]&&c.splice(l,1)[0].dispose();u=!0,E.notifySubscribers(r,"beforeChange"),r=n,s&&(E._latestValue=r)}finally{o.dependencyDetection.end()}E.notifySubscribers(r),a=!1}function E(){if(!(arguments.length>0))return x();S.apply(E,arguments)}function S(){if(typeof l!="function")throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");l.apply(t,arguments)}function x(){return u||w(),o.dependencyDetection.registerDependency(E),r}var r,u=!1,a=!1,f=e;f&&typeof f=="object"?(n=f,f=n.read):(n=n||{},f||(f=n.read));if(typeof f!="function")throw new Error("Pass a function that returns the value of the ko.computed");var l=n.write;t||(t=n.owner);var c=[],p=h,d=typeof n.disposeWhenNodeIsRemoved=="object"?n.disposeWhenNodeIsRemoved:null,v=n.disposeWhen||function(){return!1};if(d){p=function(){o.utils.domNodeDisposal.removeDisposeCallback(d,arguments.callee),h()},o.utils.domNodeDisposal.addDisposeCallback(d,p);var m=v;v=function(){return!o.utils.domNodeIsAttachedToDocument(d)||m()}}var y=null;return E.getDependenciesCount=function(){return c.length},E.hasWriteFunction=typeof n.write=="function",E.dispose=function(){p()},o.subscribable.call(E),o.utils.extend(E,o.dependentObservable.fn),n.deferEvaluation!==!0&&w(),o.exportProperty(E,"dispose",E.dispose),o.exportProperty(E,"getDependenciesCount",E.getDependenciesCount),E},o.isComputed=function(e){return o.hasPrototype(e,o.dependentObservable)};var c=o.observable.protoProperty;o.dependentObservable[c]=o.observable,o.dependentObservable.fn={},o.dependentObservable.fn[c]=o.dependentObservable,o.exportSymbol("dependentObservable",o.dependentObservable),o.exportSymbol("computed",o.dependentObservable),o.exportSymbol("isComputed",o.isComputed),function(){function t(e,s,o){o=o||new r,e=s(e);var u=typeof e=="object"&&e!==null&&e!==i&&!(e instanceof Date);if(!u)return e;var a=e instanceof Array?[]:{};return o.save(e,a),n(e,function(n){var r=s(e[n]);switch(typeof r){case"boolean":case"number":case"string":case"function":a[n]=r;break;case"object":case"undefined":var u=o.get(r);a[n]=u!==i?u:t(r,s,o)}}),a}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);typeof e.toJSON=="function"&&t("toJSON")}else for(var r in e)t(r)}function r(){var e=[],t=[];this.save=function(n,r){var i=o.utils.arrayIndexOf(e,n);i>=0?t[i]=r:(e.push(n),t.push(r))},this.get=function(n){var r=o.utils.arrayIndexOf(e,n);return r>=0?t[r]:i}}var e=10;o.toJS=function(n){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return t(n,function(t){for(var n=0;o.isObservable(t)&&n<e;n++)t=t();return t})},o.toJSON=function(e,t,n){var r=o.toJS(e);return o.utils.stringifyJson(r,t,n)}}(),o.exportSymbol("toJS",o.toJS),o.exportSymbol("toJSON",o.toJSON),function(){var e="__ko__hasDomDataOptionValue__";o.selectExtensions={readValue:function(t){switch(o.utils.tagNameLower(t)){case"option":if(t[e]===!0)return o.utils.domData.get(t,o.bindingHandlers.options.optionValueDomDataKey);return t.getAttribute("value");case"select":return t.selectedIndex>=0?o.selectExtensions.readValue(t.options[t.selectedIndex]):i;default:return t.value}},writeValue:function(t,n){switch(o.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":o.utils.domData.set(t,o.bindingHandlers.options.optionValueDomDataKey,i),e in t&&delete t[e],t.value=n;break;default:o.utils.domData.set(t,o.bindingHandlers.options.optionValueDomDataKey,n),t[e]=!0,t.value=typeof n=="number"?n:""}break;case"select":for(var r=t.options.length-1;r>=0;r--)if(o.selectExtensions.readValue(t.options[r])==n){t.selectedIndex=r;break}break;default:if(n===null||n===i)n="";t.value=n}}}}(),o.exportSymbol("selectExtensions",o.selectExtensions),o.exportSymbol("selectExtensions.readValue",o.selectExtensions.readValue),o.exportSymbol("selectExtensions.writeValue",o.selectExtensions.writeValue),o.jsonExpressionRewriting=function(){function r(t,n){var r=null;while(t!=r)r=t,t=t.replace(e,function(e,t){return n[t]});return t}function i(e){return o.utils.arrayIndexOf(n,o.utils.stringTrim(e).toLowerCase())>=0?!1:e.match(t)!==null}function s(e){var t=o.utils.stringTrim(e);switch(t.length&&t.charAt(0)){case"'":case'"':return e;default:return"'"+t+"'"}}var e=/\@ko_token_(\d+)\@/g,t=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,n=["true","false"];return{bindingRewriteValidators:[],parseObjectLiteral:function(e){var t=o.utils.stringTrim(e);if(t.length<3)return[];t.charAt(0)==="{"&&(t=t.substring(1,t.length-1));var n=[],i=null,s;for(var u=0;u<t.length;u++){var a=t.charAt(u);if(i===null)switch(a){case'"':case"'":case"/":i=u,s=a}else if(a==s&&t.charAt(u-1)!=="\\"){var f=t.substring(i,u+1);n.push(f);var l="@ko_token_"+(n.length-1)+"@";t=t.substring(0,i)+l+t.substring(u+1),u-=f.length-l.length,i=null}}i=null,s=null;var c=0,h=null;for(var u=0;u<t.length;u++){var a=t.charAt(u);if(i===null)switch(a){case"{":i=u,h=a,s="}";break;case"(":i=u,h=a,s=")";break;case"[":i=u,h=a,s="]"}if(a===h)c++;else if(a===s){c--;if(c===0){var f=t.substring(i,u+1);n.push(f);var l="@ko_token_"+(n.length-1)+"@";t=t.substring(0,i)+l+t.substring(u+1),u-=f.length-l.length,i=null}}}var p=[],d=t.split(",");for(var v=0,m=d.length;v<m;v++){var g=d[v],y=g.indexOf(":");if(y>0&&y<g.length-1){var b=g.substring(0,y),w=g.substring(y+1);p.push({key:r(b,n),value:r(w,n)})}else p.push({unknown:r(g,n)})}return p},insertPropertyAccessorsIntoJson:function(e){var t=typeof e=="string"?o.jsonExpressionRewriting.parseObjectLiteral(e):e,n=[],r=[],u;for(var a=0;u=t[a];a++){n.length>0&&n.push(",");if(u.key){var f=s(u.key),l=u.value;n.push(f),n.push(":"),n.push(l),i(o.utils.stringTrim(l))&&(r.length>0&&r.push(", "),r.push(f+" : function(__ko_value) { "+l+" = __ko_value; }"))}else u.unknown&&n.push(u.unknown)}var c=n.join("");if(r.length>0){var h=r.join("");c=c+", '_ko_property_writers' : { "+h+" } "}return c},keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(o.utils.stringTrim(e[n]["key"])==t)return!0;return!1},writeValueToProperty:function(e,t,n,r,i){if(!e||!o.isWriteableObservable(e)){var s=t()._ko_property_writers;s&&s[n]&&s[n](r)}else(!i||e()!==r)&&e(r)}}}(),o.exportSymbol("jsonExpressionRewriting",o.jsonExpressionRewriting),o.exportSymbol("jsonExpressionRewriting.bindingRewriteValidators",o.jsonExpressionRewriting.bindingRewriteValidators),o.exportSymbol("jsonExpressionRewriting.parseObjectLiteral",o.jsonExpressionRewriting.parseObjectLiteral),o.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",o.jsonExpressionRewriting.insertPropertyAccessorsIntoJson),function(){function s(t){return t.nodeType==8&&(e?t.text:t.nodeValue).match(n)}function u(t){return t.nodeType==8&&(e?t.text:t.nodeValue).match(r)}function a(e,t){var n=e,r=1,i=[];while(n=n.nextSibling){if(u(n)){r--;if(r===0)return i}i.push(n),s(n)&&r++}if(!t)throw new Error("Cannot find closing comment tag to match: "+e.nodeValue);return null}function f(e,t){var n=a(e,t);return n?n.length>0?n[n.length-1].nextSibling:e.nextSibling:null}function l(e){var t=e.firstChild,n=null;if(t)do if(n)n.push(t);else if(s(t)){var r=f(t,!0);r?t=r:n=[t]}else u(t)&&(n=[t]);while(t=t.nextSibling);return n}var e=t.createComment("test").text==="<!--test-->",n=e?/^<!--\s*ko\s+(.*\:.*)\s*-->$/:/^\s*ko\s+(.*\:.*)\s*$/,r=e?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};o.virtualElements={allowedBindings:{},childNodes:function(e){return s(e)?a(e):e.childNodes},emptyNode:function(e){if(!s(e))o.utils.emptyDomNode(e);else{var t=o.virtualElements.childNodes(e);for(var n=0,r=t.length;n<r;n++)o.removeNode(t[n])}},setDomNodeChildren:function(e,t){if(!s(e))o.utils.setDomNodeChildren(e,t);else{o.virtualElements.emptyNode(e);var n=e.nextSibling;for(var r=0,i=t.length;r<i;r++)n.parentNode.insertBefore(t[r],n)}},prepend:function(e,t){s(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},insertAfter:function(e,t,n){s(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t)},firstChild:function(e){return s(e)?!e.nextSibling||u(e.nextSibling)?null:e.nextSibling:e.firstChild},nextSibling:function(e){return s(e)&&(e=f(e)),e.nextSibling&&u(e.nextSibling)?null:e.nextSibling},virtualNodeBindingValue:function(e){var t=s(e);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(!i[o.utils.tagNameLower(e)])return;var t=e.firstChild;if(t)do if(t.nodeType===1){var n=l(t);if(n){var r=t.nextSibling;for(var s=0;s<n.length;s++)r?e.insertBefore(n[s],r):e.appendChild(n[s])}}while(t=t.nextSibling)}}}(),o.exportSymbol("virtualElements",o.virtualElements),o.exportSymbol("virtualElements.allowedBindings",o.virtualElements.allowedBindings),o.exportSymbol("virtualElements.emptyNode",o.virtualElements.emptyNode),o.exportSymbol("virtualElements.insertAfter",o.virtualElements.insertAfter),o.exportSymbol("virtualElements.prepend",o.virtualElements.prepend),o.exportSymbol("virtualElements.setDomNodeChildren",o.virtualElements.setDomNodeChildren),function(){function t(e,t,r){var i=t+"_"+e;return r[i]||(r[i]=n(e,t))}function n(e,t){var n=" { "+o.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(e)+" } ";return o.utils.buildEvalWithinScopeFunction(n,t)}var e="data-bind";o.bindingProvider=function(){this.bindingCache={}},o.utils.extend(o.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return t.getAttribute(e)!=null;case 8:return o.virtualElements.virtualNodeBindingValue(t)!=null;default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t):null},getBindingsString:function(t,n){switch(t.nodeType){case 1:return t.getAttribute(e);case 8:return o.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(e,n){try{var r=n.$data,i=typeof r=="object"&&r!=null?[r,n]:[n],s=t(e,i.length,this.bindingCache);return s(i)}catch(o){throw new Error("Unable to parse bindings.\nMessage: "+o+";\nBindings value: "+e)}}}),o.bindingProvider.instance=new o.bindingProvider}(),o.exportSymbol("bindingProvider",o.bindingProvider),function(){function t(e){var t=o.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function n(e,t,n){var i,s=o.virtualElements.firstChild(t);while(i=s)s=o.virtualElements.nextSibling(i),r(e,i,n)}function r(e,t,r){var i=!0,u=t.nodeType===1;u&&o.virtualElements.normaliseVirtualElementDomStructure(t);var a=u&&r||o.bindingProvider.instance.nodeHasBindings(t);a&&(i=s(t,null,e,r).shouldBindDescendants),i&&n(e,t,!u)}function s(e,n,r,s){function f(e){return function(){return a[e]}}function l(){return a}var u=0,a,c;return o.dependentObservable(function(){var h=r&&r instanceof o.bindingContext?r:new o.bindingContext(o.utils.unwrapObservable(r)),p=h.$data;s&&o.storedBindingContextForNode(e,h);var d=typeof n=="function"?n():n;a=d||o.bindingProvider.instance.getBindings(e,h);if(a){if(u===0){u=1;for(var v in a){var m=o.bindingHandlers[v];m&&e.nodeType===8&&t(v);if(m&&typeof m.init=="function"){var g=m.init,y=g(e,f(v),l,p,h);if(y&&y.controlsDescendantBindings){if(c!==i)throw new Error("Multiple bindings ("+c+" and "+v+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");c=v}}}u=2}if(u===2)for(var v in a){var m=o.bindingHandlers[v];if(m&&typeof m.update=="function"){var b=m.update;b(e,f(v),l,p,h)}}}},null,{disposeWhenNodeIsRemoved:e}),{shouldBindDescendants:c===i}}o.bindingHandlers={},o.bindingContext=function(e,t){t?(o.utils.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=e),this.$data=e},o.bindingContext.prototype.createChildContext=function(e){return new o.bindingContext(e,this)},o.bindingContext.prototype.extend=function(e){var t=o.utils.extend(new o.bindingContext,this);return o.utils.extend(t,e)};var u="__ko_bindingContext__";o.storedBindingContextForNode=function(e,t){if(arguments.length!=2)return o.utils.domData.get(e,u);o.utils.domData.set(e,u,t)},o.applyBindingsToNode=function(e,t,n){return e.nodeType===1&&o.virtualElements.normaliseVirtualElementDomStructure(e),s(e,t,n,!0)},o.applyBindingsToDescendants=function(e,t){(t.nodeType===1||t.nodeType===8)&&n(e,t,!0)},o.applyBindings=function(t,n){if(n&&n.nodeType!==1&&n.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||e.document.body,r(t,n,!0)},o.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=o.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return o.contextFor(e.parentNode)}return i},o.dataFor=function(e){var t=o.contextFor(e);return t?t.$data:i},o.exportSymbol("bindingHandlers",o.bindingHandlers),o.exportSymbol("applyBindings",o.applyBindings),o.exportSymbol("applyBindingsToDescendants",o.applyBindingsToDescendants),o.exportSymbol("applyBindingsToNode",o.applyBindingsToNode),o.exportSymbol("contextFor",o.contextFor),o.exportSymbol("dataFor",o.dataFor)}();var p=["click"];o.utils.arrayForEach(p,function(e){o.bindingHandlers[e]={init:function(t,n,r,i){var s=function(){var t={};return t[e]=n(),t};return o.bindingHandlers.event.init.call(this,t,s,r,i)}}}),o.bindingHandlers.event={init:function(e,t,n,r){var i=t()||{};for(var s in i)(function(){var i=s;typeof i=="string"&&o.utils.registerEventHandler(e,i,function(e){var s,u=t()[i];if(!u)return;var a=n();try{var f=o.utils.makeArray(arguments);f.unshift(r),s=u.apply(r,f)}finally{s!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var l=a[i+"Bubble"]!==!1;l||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())})})()}},o.bindingHandlers.submit={init:function(e,t,n,r){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");o.utils.registerEventHandler(e,"submit",function(n){var i,s=t();try{i=s.call(r,e)}finally{i!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},o.bindingHandlers.visible={update:function(e,t){var n=o.utils.unwrapObservable(t()),r=e.style.display!="none";n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},o.bindingHandlers.enable={update:function(e,t){var n=o.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):!n&&!e.disabled&&(e.disabled=!0)}},o.bindingHandlers.disable={update:function(e,t){o.bindingHandlers.enable.update(e,function(){return!o.utils.unwrapObservable(t())})}},o.bindingHandlers.value={init:function(e,t,n){var r=["change"],i=n().valueUpdate;i&&(typeof i=="string"&&(i=[i]),o.utils.arrayPushAll(r,i),r=o.utils.arrayGetDistinctValues(r));var s=function(){var r=t(),i=o.selectExtensions.readValue(e);o.jsonExpressionRewriting.writeValueToProperty(r,n,"value",i,!0)},u=o.utils.ieVersion&&e.tagName.toLowerCase()=="input"&&e.type=="text"&&e.autocomplete!="off"&&(!e.form||e.form.autocomplete!="off");if(u&&o.utils.arrayIndexOf(r,"propertychange")==-1){var a=!1;o.utils.registerEventHandler(e,"propertychange",function(){a=!0}),o.utils.registerEventHandler(e,"blur",function(){a&&(a=!1,s())})}o.utils.arrayForEach(r,function(t){var n=s;o.utils.stringStartsWith(t,"after")&&(n=function(){setTimeout(s,0)},t=t.substring("after".length)),o.utils.registerEventHandler(e,t,n)})},update:function(e,t){var n=o.utils.tagNameLower(e)==="select",r=o.utils.unwrapObservable(t()),i=o.selectExtensions.readValue(e),s=r!=i;r===0&&i!==0&&i!=="0"&&(s=!0);if(s){var u=function(){o.selectExtensions.writeValue(e,r)};u();var a=n;a&&setTimeout(u,0)}n&&e.length>0&&d(e,r,!1)}},o.bindingHandlers.options={update:function(e,n,r){if(o.utils.tagNameLower(e)!=="select")throw new Error("options binding applies only to SELECT elements");var s=e.length==0,u=o.utils.arrayMap(o.utils.arrayFilter(e.childNodes,function(e){return e.tagName&&o.utils.tagNameLower(e)==="option"&&e.selected}),function(e){return o.selectExtensions.readValue(e)||e.innerText||e.textContent}),a=e.scrollTop,f=o.utils.unwrapObservable(n()),l=e.value;while(e.length>0)o.cleanNode(e.options[0]),e.remove(0);if(f){var c=r();typeof f.length!="number"&&(f=[f]);if(c.optionsCaption){var p=t.createElement("option");o.utils.setHtml(p,c.optionsCaption),o.selectExtensions.writeValue(p,i),e.appendChild(p)}for(var v=0,m=f.length;v<m;v++){var p=t.createElement("option"),g=typeof c.optionsValue=="string"?f[v][c.optionsValue]:f[v];g=o.utils.unwrapObservable(g),o.selectExtensions.writeValue(p,g);var y=c.optionsText,b;typeof y=="function"?b=y(f[v]):typeof y=="string"?b=f[v][y]:b=g;if(b===null||b===i)b="";o.utils.setTextContent(p,b),e.appendChild(p)}var w=e.getElementsByTagName("option"),E=0;for(var v=0,m=w.length;v<m;v++)o.utils.arrayIndexOf(u,o.selectExtensions.readValue(w[v]))>=0&&(o.utils.setOptionNodeSelectionState(w[v],!0),E++);e.scrollTop=a,s&&"value"in c&&d(e,o.utils.unwrapObservable(c.value),!0),o.utils.ensureSelectElementIsRenderedCorrectly(e)}}},o.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__",o.bindingHandlers.selectedOptions={getSelectedValuesFromSelectNode:function(e){var t=[],n=e.childNodes;for(var r=0,i=n.length;r<i;r++){var s=n[r],u=o.utils.tagNameLower(s);if(u=="option"&&s.selected)t.push(o.selectExtensions.readValue(s));else if(u=="optgroup"){var a=o.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(s);Array.prototype.splice.apply(t,[t.length,0].concat(a))}}return t},init:function(e,t,n){o.utils.registerEventHandler(e,"change",function(){var e=t(),r=o.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this);o.jsonExpressionRewriting.writeValueToProperty(e,n,"value",r)})},update:function(e,t){if(o.utils.tagNameLower(e)!="select")throw new Error("values binding applies only to SELECT elements");var n=o.utils.unwrapObservable(t());if(n&&typeof n.length=="number"){var r=e.childNodes;for(var i=0,s=r.length;i<s;i++){var u=r[i];o.utils.tagNameLower(u)==="option"&&o.utils.setOptionNodeSelectionState(u,o.utils.arrayIndexOf(n,o.selectExtensions.readValue(u))>=0)}}}},o.bindingHandlers.text={update:function(e,t){o.utils.setTextContent(e,t())}},o.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){var n=o.utils.unwrapObservable(t());o.utils.setHtml(e,n)}},o.bindingHandlers.css={update:function(e,t){var n=o.utils.unwrapObservable(t()||{});for(var r in n)if(typeof r=="string"){var i=o.utils.unwrapObservable(n[r]);o.utils.toggleDomNodeCssClass(e,r,i)}}},o.bindingHandlers.style={update:function(e,t){var n=o.utils.unwrapObservable(t()||{});for(var r in n)if(typeof r=="string"){var i=o.utils.unwrapObservable(n[r]);e.style[r]=i||""}}},o.bindingHandlers.uniqueName={init:function(e,n){n()&&(e.name="ko_unique_"+ ++o.bindingHandlers.uniqueName.currentIndex,(o.utils.isIe6||o.utils.isIe7)&&e.mergeAttributes(t.createElement("<input name='"+e.name+"'/>"),!1))}},o.bindingHandlers.uniqueName.currentIndex=0,o.bindingHandlers.checked={init:function(e,t,n){var r=function(){var r;if(e.type=="checkbox")r=e.checked;else{if(e.type!="radio"||!e.checked)return;r=e.value}var i=t();if(e.type=="checkbox"&&o.utils.unwrapObservable(i)instanceof Array){var s=o.utils.arrayIndexOf(o.utils.unwrapObservable(i),e.value);e.checked&&s<0?i.push(e.value):!e.checked&&s>=0&&i.splice(s,1)}else o.jsonExpressionRewriting.writeValueToProperty(i,n,"checked",r,!0)};o.utils.registerEventHandler(e,"click",r),e.type=="radio"&&!e.name&&o.bindingHandlers.uniqueName.init(e,function(){return!0})},update:function(e,t){var n=o.utils.unwrapObservable(t());e.type=="checkbox"?n instanceof Array?e.checked=o.utils.arrayIndexOf(n,e.value)>=0:e.checked=n:e.type=="radio"&&(e.checked=e.value==n)}};var v={"class":"className","for":"htmlFor"};o.bindingHandlers.attr={update:function(e,t,n){var r=o.utils.unwrapObservable(t())||{};for(var s in r)if(typeof s=="string"){var u=o.utils.unwrapObservable(r[s]),a=u===!1||u===null||u===i;a&&e.removeAttribute(s),o.utils.ieVersion<=8&&s in v?(s=v[s],a?e.removeAttribute(s):e[s]=u):a||e.setAttribute(s,u.toString())}}},o.bindingHandlers.hasfocus={init:function(e,t,n){var r=function(e){var r=t();o.jsonExpressionRewriting.writeValueToProperty(r,n,"hasfocus",e,!0)};o.utils.registerEventHandler(e,"focus",function(){r(!0)}),o.utils.registerEventHandler(e,"focusin",function(){r(!0)}),o.utils.registerEventHandler(e,"blur",function(){r(!1)}),o.utils.registerEventHandler(e,"focusout",function(){r(!1)})},update:function(e,t){var n=o.utils.unwrapObservable(t());n?e.focus():e.blur(),o.utils.triggerEvent(e,n?"focusin":"focusout")}},o.bindingHandlers["with"]={makeTemplateValueAccessor:function(e){return function(){var t=e();return{"if":t,data:t,templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers["with"].makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers["with"].makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators["with"]=!1,o.virtualElements.allowedBindings["with"]=!0,o.bindingHandlers["if"]={makeTemplateValueAccessor:function(e){return function(){return{"if":e(),templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers["if"].makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers["if"].makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators["if"]=!1,o.virtualElements.allowedBindings["if"]=!0,o.bindingHandlers.ifnot={makeTemplateValueAccessor:function(e){return function(){return{ifnot:e(),templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers.ifnot.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers.ifnot.makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators.ifnot=!1,o.virtualElements.allowedBindings.ifnot=!0,o.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=o.utils.unwrapObservable(e());return!t||typeof t.length=="number"?{foreach:t,templateEngine:o.nativeTemplateEngine.instance}:{foreach:t.data,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators.foreach=!1,o.virtualElements.allowedBindings.foreach=!0,o.templateEngine=function(){},o.templateEngine.prototype.renderTemplateSource=function(e,t,n){throw new Error("Override renderTemplateSource")},o.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},o.templateEngine.prototype.makeTemplateSource=function(e,n){if(typeof e=="string"){n=n||t;var r=n.getElementById(e);if(!r)throw new Error("Cannot find template with ID "+e);return new o.templateSources.domElement(r)}if(e.nodeType==1||e.nodeType==8)return new o.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},o.templateEngine.prototype.renderTemplate=function(e,t,n,r){var i=this.makeTemplateSource(e,r);return this.renderTemplateSource(i,t,n)},o.templateEngine.prototype.isTemplateRewritten=function(e,n){if(this.allowTemplateRewriting===!1)return!0;var r=n&&n!=t;return!r&&this.knownRewrittenTemplates&&this.knownRewrittenTemplates[e]?!0:this.makeTemplateSource(e,n).data("isRewritten")},o.templateEngine.prototype.rewriteTemplate=function(e,n,r){var i=this.makeTemplateSource(e,r),s=n(i.text());i.text(s),i.data("isRewritten",!0);var o=r&&r!=t;!o&&typeof e=="string"&&(this.knownRewrittenTemplates=this.knownRewrittenTemplates||{},this.knownRewrittenTemplates[e]=!0)},o.exportSymbol("templateEngine",o.templateEngine),o.templateRewriting=function(){function n(e){var t=o.jsonExpressionRewriting.bindingRewriteValidators;for(var n=0;n<e.length;n++){var r=e[n].key;if(t.hasOwnProperty(r)){var i=t[r];if(typeof i=="function"){var s=i(e[n].value);if(s)throw new Error(s)}else if(!i)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}function r(e,t,r){var i=o.jsonExpressionRewriting.parseObjectLiteral(e);n(i);var s=o.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(i),u="ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {             return (function() { return { "+s+" } })()         })";return r.createJavaScriptEvaluatorBlock(u)+t}var e=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,t=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return o.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(n,i){return n.replace(e,function(){return r(arguments[6],arguments[1],i)}).replace(t,function(){return r(arguments[1],"<!-- ko -->",i)})},applyMemoizedBindingsToNextSibling:function(e){return o.memoization.memoize(function(t,n){t.nextSibling&&o.applyBindingsToNode(t.nextSibling,e,n)})}}}(),o.exportSymbol("templateRewriting",o.templateRewriting),o.exportSymbol("templateRewriting.applyMemoizedBindingsToNextSibling",o.templateRewriting.applyMemoizedBindingsToNextSibling),function(){o.templateSources={},o.templateSources.domElement=function(e){this.domElement=e},o.templateSources.domElement.prototype.text=function(){var e=o.utils.tagNameLower(this.domElement),t=e==="script"?"text":e==="textarea"?"value":"innerHTML";if(arguments.length==0)return this.domElement[t];var n=arguments[0];t==="innerHTML"?o.utils.setHtml(this.domElement,n):this.domElement[t]=n},o.templateSources.domElement.prototype.data=function(e){if(arguments.length===1)return o.utils.domData.get(this.domElement,"templateSourceData_"+e);o.utils.domData.set(this.domElement,"templateSourceData_"+e,arguments[1])};var e="__ko_anon_template__";o.templateSources.anonymousTemplate=function(e){this.domElement=e},o.templateSources.anonymousTemplate.prototype=new o.templateSources.domElement,o.templateSources.anonymousTemplate.prototype.text=function(){if(arguments.length==0){var t=o.utils.domData.get(this.domElement,e)||{};return t.textData===i&&t.containerData&&(t.textData=t.containerData.innerHTML),t.textData}var n=arguments[0];o.utils.domData.set(this.domElement,e,{textData:n})},o.templateSources.domElement.prototype.nodes=function(){if(arguments.length==0){var t=o.utils.domData.get(this.domElement,e)||{};return t.containerData}var n=arguments[0];o.utils.domData.set(this.domElement,e,{containerData:n})},o.exportSymbol("templateSources",o.templateSources),o.exportSymbol("templateSources.domElement",o.templateSources.domElement),o.exportSymbol("templateSources.anonymousTemplate",o.templateSources.anonymousTemplate)}(),function(){function t(e,t,n){var r,i=e,s=o.virtualElements.nextSibling(t);while(i&&(r=i)!==s)i=o.virtualElements.nextSibling(r),(r.nodeType===1||r.nodeType===8)&&n(r)}function n(e,n){if(e.length){var r=e[0],i=e[e.length-1];t(r,i,function(e){o.applyBindings(n,e)}),t(r,i,function(e){o.memoization.unmemoizeDomNodeAndDescendants(e,[n])})}}function r(e){return e.nodeType?e:e.length>0?e[0]:null}function s(t,i,s,u,a){a=a||{};var f=t&&r(t),l=f&&f.ownerDocument,c=a.templateEngine||e;o.templateRewriting.ensureTemplateIsRewritten(s,c,l);var h=c.renderTemplate(s,u,a,l);if(typeof h.length!="number"||h.length>0&&typeof h[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(i){case"replaceChildren":o.virtualElements.setDomNodeChildren(t,h),p=!0;break;case"replaceNode":o.utils.replaceDomNodes(t,h),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+i)}return p&&(n(h,u),a.afterRender&&a.afterRender(h,u.$data)),h}function a(e,t){var n=o.utils.domData.get(e,u);n&&typeof n.dispose=="function"&&n.dispose(),o.utils.domData.set(e,u,t)}var e;o.setTemplateEngine=function(t){if(!(t==i||t instanceof o.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");e=t},o.renderTemplate=function(t,n,u,a,f){u=u||{};if((u.templateEngine||e)==i)throw new Error("Set a template engine before calling renderTemplate");f=f||"replaceChildren";if(a){var l=r(a),c=function(){return!l||!o.utils.domNodeIsAttachedToDocument(l)},h=l&&f=="replaceNode"?l.parentNode:l;return o.dependentObservable(function(){var e=n&&n instanceof o.bindingContext?n:new o.bindingContext(o.utils.unwrapObservable(n)),i=typeof t=="function"?t(e.$data):t,c=s(a,f,i,e,u);f=="replaceNode"&&(a=c,l=r(a))},null,{disposeWhen:c,disposeWhenNodeIsRemoved:h})}return o.memoization.memoize(function(e){o.renderTemplate(t,n,u,e,"replaceNode")})},o.renderTemplateForEach=function(e,t,r,u,a){var f,l=function(t,n){var i=typeof e=="function"?e(t):e;return f=a.createChildContext(o.utils.unwrapObservable(t)),f.$index=n,s(null,"ignoreTargetNode",i,f,r)},c=function(e,t,i){n(t,f),r.afterRender&&r.afterRender(t,e)};return o.dependentObservable(function(){var e=o.utils.unwrapObservable(t)||[];typeof e.length=="undefined"&&(e=[e]);var n=o.utils.arrayFilter(e,function(e){return r.includeDestroyed||e===i||e===null||!o.utils.unwrapObservable(e._destroy)});o.utils.setDomNodeChildrenFromArrayMapping(u,n,l,r,c)},null,{disposeWhenNodeIsRemoved:u})};var u="__ko__templateSubscriptionDomDataKey__";o.bindingHandlers.template={init:function(e,t){var n=o.utils.unwrapObservable(t());if(typeof n!="string"&&!n.name&&(e.nodeType==1||e.nodeType==8)){var r=e.nodeType==1?e.childNodes:o.virtualElements.childNodes(e),i=o.utils.moveCleanedNodesToContainerElement(r);(new o.templateSources.anonymousTemplate(e)).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var s=o.utils.unwrapObservable(t()),u,f=!0;typeof s=="string"?u=s:(u=s.name,"if"in s&&(f=f&&o.utils.unwrapObservable(s["if"])),"ifnot"in s&&(f=f&&!o.utils.unwrapObservable(s.ifnot)));var l=null;if(typeof s=="object"&&"foreach"in s){var c=f&&s.foreach||[];l=o.renderTemplateForEach(u||e,c,s,e,i)}else if(f){var h=typeof s=="object"&&"data"in s?i.createChildContext(o.utils.unwrapObservable(s.data)):i;l=o.renderTemplate(u||e,h,s,e)}else o.virtualElements.emptyNode(e);a(e,l)}},o.jsonExpressionRewriting.bindingRewriteValidators.template=function(e){var t=o.jsonExpressionRewriting.parseObjectLiteral(e);return t.length==1&&t[0].unknown?null:o.jsonExpressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},o.virtualElements.allowedBindings.template=!0}(),o.exportSymbol("setTemplateEngine",o.setTemplateEngine),o.exportSymbol("renderTemplate",o.renderTemplate),function(){function e(e,t,n){var r=[];for(var s=0;s<=t.length;s++)r[s]=[];for(var s=0,o=Math.min(e.length,n);s<=o;s++)r[0][s]=s;for(var s=1,o=Math.min(t.length,n);s<=o;s++)r[s][0]=s;var u,a=e.length,f,l=t.length,c,h;for(u=1;u<=a;u++){var p=Math.max(1,u-n),d=Math.min(l,u+n);for(f=p;f<=d;f++)if(e[u-1]===t[f-1])r[f][u]=r[f-1][u-1];else{var v=r[f-1][u]===i?Number.MAX_VALUE:r[f-1][u]+1,m=r[f][u-1]===i?Number.MAX_VALUE:r[f][u-1]+1;r[f][u]=Math.min(v,m)}}return r}function t(e,t,n){var r=t.length,s=n.length,o=[],u=e[s][r];if(u===i)return null;while(r>0||s>0){var a=e[s][r],f=s>0?e[s-1][r]:u+1,l=r>0?e[s][r-1]:u+1,c=s>0&&r>0?e[s-1][r-1]:u+1;if(f===i||f<a-1)f=u+1;if(l===i||l<a-1)l=u+1;c<a-1&&(c=u+1),f<=l&&f<c?(o.push({status:"added",value:n[s-1]}),s--):l<f&&l<c?(o.push({status:"deleted",value:t[r-1]}),r--):(o.push({status:"retained",value:t[r-1]}),s--,r--)}return o.reverse()}o.utils.compareArrays=function(n,r,s){if(s===i)return o.utils.compareArrays(n,r,1)||o.utils.compareArrays(n,r,10)||o.utils.compareArrays(n,r,Number.MAX_VALUE);n=n||[],r=r||[];var u=e(n,r,s);return t(u,n,r)}}(),o.exportSymbol("utils.compareArrays",o.utils.compareArrays),function(){function e(e){if(e.length>2){var t=e[0],n=e[e.length-1],r=[t];while(t!==n){t=t.nextSibling;if(!t)return;r.push(t)}Array.prototype.splice.apply(e,[0,e.length].concat(r))}}function t(t,n,r,i,s){var u=[],a=o.dependentObservable(function(){var t=n(r,s)||[];u.length>0&&(e(u),o.utils.replaceDomNodes(u,t),i&&i(r,t)),u.splice(0,u.length),o.utils.arrayPushAll(u,t)},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return u.length==0||!o.utils.domNodeIsAttachedToDocument(u[0])}});return{mappedNodes:u,dependentObservable:a}}var n="setDomNodeChildrenFromArrayMapping_lastMappingResult";o.utils.setDomNodeChildrenFromArrayMapping=function(r,s,u,a,f){s=s||[],a=a||{};var l=o.utils.domData.get(r,n)===i,c=o.utils.domData.get(r,n)||[],h=o.utils.arrayMap(c,function(e){return e.arrayEntry}),p=o.utils.compareArrays(h,s),d=[],v=0,m=[],g=0,b=[],E=null;for(var S=0,T=p.length;S<T;S++)switch(p[S].status){case"retained":var N=c[v];N.indexObservable(g),g=d.push(N),N.domNodes.length>0&&(E=N.domNodes[N.domNodes.length-1]),v++;break;case"deleted":c[v].dependentObservable.dispose(),e(c[v].domNodes),o.utils.arrayForEach(c[v].domNodes,function(e){m.push({element:e,index:S,value:p[S].value}),E=e}),v++;break;case"added":var C=p[S].value,k=o.observable(g),L=t(r,u,C,f,k),A=L.mappedNodes;g=d.push({arrayEntry:p[S].value,domNodes:A,dependentObservable:L.dependentObservable,indexObservable:k});for(var O=0,M=A.length;O<M;O++){var _=A[O];b.push({element:_,index:S,value:p[S].value}),E==null?o.virtualElements.prepend(r,_):o.virtualElements.insertAfter(r,_,E),E=_}f&&f(C,A,k)}o.utils.arrayForEach(m,function(e){o.cleanNode(e.element)});var D=!1;if(!l){if(a.afterAdd)for(var S=0;S<b.length;S++)a.afterAdd(b[S].element,b[S].index,b[S].value);if(a.beforeRemove){for(var S=0;S<m.length;S++)a.beforeRemove(m[S].element,m[S].index,m[S].value);D=!0}}if(!D&&m.length)for(var S=0;S<m.length;S++){var P=m[S].element;P.parentNode&&P.parentNode.removeChild(P)}o.utils.domData.set(r,n,d)}}(),o.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",o.utils.setDomNodeChildrenFromArrayMapping),o.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},o.nativeTemplateEngine.prototype=new o.templateEngine,o.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n){var r=!(o.utils.ieVersion<9),i=r?e.nodes:null,s=i?e.nodes():null;if(s)return o.utils.makeArray(s.cloneNode(!0).childNodes);var u=e.text();return o.utils.parseHtmlFragment(u)},o.nativeTemplateEngine.instance=new o.nativeTemplateEngine,o.setTemplateEngine(o.nativeTemplateEngine.instance),o.exportSymbol("nativeTemplateEngine",o.nativeTemplateEngine),function(){o.jqueryTmplTemplateEngine=function(){function n(){if(e<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function r(e,t,n){return jQuery.tmpl(e,t,n)}var e=this.jQueryTmplVersion=function(){if(typeof jQuery=="undefined"||!jQuery.tmpl)return 0;try{if(jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(e,i,s){s=s||{},n();var o=e.data("precompiled");if(!o){var u=e.text()||"";u="{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}",o=jQuery.template(null,u),e.data("precompiled",o)}var a=[i.$data],f=jQuery.extend({koBindingContext:i},s.templateOptions),l=r(o,a,f);return l.appendTo(t.createElement("div")),jQuery.fragments={},l},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,n){t.write("<script type='text/html' id='"+e+"'>"+n+"</script>")},e>0&&(jQuery.tmpl.tag.ko_code={open:"__.push($1 || '');"},jQuery.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},o.jqueryTmplTemplateEngine.prototype=new o.templateEngine;var e=new o.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&o.setTemplateEngine(e),o.exportSymbol("jqueryTmplTemplateEngine",o.jqueryTmplTemplateEngine)}()})})(window,document,navigator),t.observable=function(e){return typeof e=="object"&&e.constructor==Array?r.observableArray(e):typeof e=="function"?r.computed(e):r.observable(e)},t.applyBindings=function(e){e.node||(e.node=window.document.body),e.binding?r.applyBindingsToNode(e.node,e.binding,e.viewModel):r.applyBindings(e.viewModel,e.node)},t.inject=function(t){var n='<script id="'+t.id+'" type="text/html">';n+=t.content,n+="</script>";if(typeof t.target=="undefined"||t.target.toLowerCase()=="body"){var i=document.createElement("div");i.setAttribute("style","display:none;"),document.body.appendChild(i),r.utils.setHtml(i,n)}else{var s=e.Sizzle(t.target)[0];r.utils.setHtml(s,n)}},t.clearNode=function(e){r.cleanNode(e)},r.bindingHandlers.cssClass={update:function(e,t){var n=r.utils.unwrapObservable(t());e.className=n}},t.bindingHandlers=r.bindingHandlers})(e.Templating=e.Templating||{})}(window.xRTML=window.xRTML||{}),function(e,t){(function(e,t){var n=function(e){var n=this,r=e.name||"",i=e.namespace||"",s=e.description||"",o=e.properties||t,u=e.methods||t,a=e.events||t,f=e.classes||t,l=e.modules||t;this.Name=function(){return r}(),this.Namespace=function(){return i}(),this.Description=function(){return s}(),this.Properties=function(){return o}(),this.Methods=function(){return u}(),this.Events=function(){return a}(),this.Classes=function(){return f}(),this.Modules=function(){return l}()},r=function(e){var n=this,r=e.name||"",i=e.namespace||"",s=e.base||t,o=e.subclasses||t,u=e.constructors||t,a=e.description||"",f=e.properties||t,l=e.methods||t,c=e.events||t;this.Name=function(){return r}(),this.Namespace=function(){return i}(),this.Base=function(){return s}(),this.Subclasses=function(){return o}(),this.Constructors=function(){return u}(),this.Description=function(){return a}(),this.Properties=function(){return f}(),this.Methods=function(){return l}(),this.Events=function(){return c}(),this.toString=function(){return this.Namespace.length>0?this.Namespace+"."+this.Name:this.Name},this.typeOf=e.typeOf||function(){return n.toString()}},i=function(e){var n=e.name||"",r=e.description||"",i=e.mandatory||!1,s=e.type||t;this.Name=function(){return n}(),this.Description=function(){return r}(),this.Mandatory=function(){return i}(),this.Type=function(){return s}()},s=function(e){var n=e.name||"",r=e.description||"",i=e.arguments||"",s=e["return"]||t,o=e.exceptions||"";this.Name=function(){return n}(),this.Description=function(){return r}(),this.Arguments=function(){return i}(),this.Return=function(){return s}(),this.Exceptions=function(){return o}()},o=function(e){var n=e.name||"",r=e.description||"",i=e.mandatory||!1,s=e.type||t;this.Name=function(){return n}(),this.Description=function(){return r}(),this.Mandatory=function(){return i}(),this.Type=function(){return s}()},u=function(e){var n=e.name||"",r=e.handler||t;this.Name=function(){return n}(),this.Handler=function(){return r}()},a=function(e){var n=e.name||"",r=e.namespace||"",i=e.description||"",s=e.arguments||t;this.Name=function(){return n}(),this.Namespace=function(){return r}(),this.Description=function(){return i}(),this.Arguments=function(){return s}()},f={root:new n({name:"root",classes:{String:new r({name:"String",typeOf:function(){return"String"}}),Number:new r({name:"String",typeOf:function(){return"Number"}}),Boolean:new r({name:"String",typeOf:function(){return"Boolean"}}),Function:new r({name:"String",typeOf:function(){return"Function"}}),Array:new r({name:"String",typeOf:function(){return"Array"}}),Function:new r({name:"String",typeOf:function(){return"Function"}}),Date:new r({name:"String",typeOf:function(){return"Date"}}),Object:new r({name:"String",typeOf:function(){return"Object"}}),RegExp:new r({name:"String",typeOf:function(){return"RegExp"}}),Error:new r({name:"String",typeOf:function(){return"Error"}})},modules:{xRTML:new n({name:"xRTML",modules:{Tags:new n({name:"Tags",classes:new Object})}}),Anonymous:new n({name:"Anonymous"})}})},l={},c=function(e,t,n){l[e]||(l[e]=new Array),l[e].push({reference:t,propertyName:n})};e.fixUnresolvedTypes=function(){for(var e in l){var t=p(e);if(t){for(var n=0;n<l[e].length;n++)l[e][n].reference[l[e][n].propertyName]=t;delete l[e]}}for(var e in l)console.warn(e+" -> "+l[e].length)};var h=function(e){if(e==t||e.length==0)return f.root;var n,r,i=e.lastIndexOf(".");i===-1?r=e:(n=e.substring(0,i),r=e.substring(i+1));var s=f.root;return n!=t&&(s=h(n)),s.Modules[r]},p=function(e){var n,r,i=e.lastIndexOf(".");i===-1?r=e:(n=e.substring(0,i),r=e.substring(i+1));var s=f.root;return n!=t&&(s=h(n)),s?s.Classes[r]:t};e.registerModule=function(e){var r,a,f=e.name.lastIndexOf(".");f!=-1&&(e.namespace=e.name.substring(0,f),e.name=e.name.substring(f+1));var l=new n({name:e.name,namespace:e.namespace,description:e.description}),a=h(e.namespace);a.Modules||(a.Modules={}),a.Modules[e.name]=l;for(var d=0;d<e.classes.length;d++)this.registerClass(e.classes[d]);var v={};for(var m in e.properties){var y=t;e.properties[m].type instanceof String||typeof e.properties[m].type=="string"?y=p(e.properties[m].type):y=this.registerClass(e.properties[m].type),v[m]=new i({name:m,description:e.properties[m].description,mandatory:e.properties[m].mandatory,type:y}),v[m].Type||c(e.properties[m],v[m],"Type")}var b={};for(var w in e.methods){var E={};for(var S in e.methods[w].arguments){var x=t;e.methods[w].arguments[S].type instanceof String||typeof e.methods[w].arguments[S].type=="string"?x=p(e.methods[w].arguments[S].type):x=this.registerClass(e.methods[w].arguments[S].type),E[S]=new o({name:S,description:e.methods[w].arguments[S].description,mandatory:e.methods[w].arguments[S].mandatory,type:x}),E[S].Type||c(e.methods[w].arguments[S],E[S],"Type")}var T={};for(var d=0;d<e.methods[w].exceptions.length;d++)if(e.methods[w].exceptions[d]instanceof String||typeof e.methods[w].exceptions[d]=="string"){var N=p(e.methods[w].exceptions[d]);if(N==t)throw"Type "+e.methods[w].exceptions[d]+" is not defined";T[N.toString()]=N}else{var N=this.registerClass(e.methods[w].exceptions[d]);T[N.toString()]=N}var C={name:w,description:e.methods[w].description,arguments:E,exceptions:T};e.methods[w]["return"]&&(e.methods[w]["return"]instanceof String||typeof e.methods[w]["return"]=="string"?C["return"]=p(e.methods[w]["return"]):C["return"]=this.registerClass(e.methods[w]["return"])),b[w]=new s(C),e.methods[w]["return"]&&!b[w].Return&&c(e.methods[w]["return"],b[w],"Return")}var L={};for(var A in e.events){var O=t;e.events[A].type instanceof String||typeof e.events[A].type=="string"?O=p(e.events[A].handler):O=this.registerHandler(e.events[A].handler),L[A]=new u({name:A,description:e.events[A].description,handler:O})}return l.Properties=v,l.Methods=b,l.Events=L,l},e.registerClass=function(e){e.name==t&&(e.name=guidGenerator()),e.namespace==t&&(e.namespace="Anonymous");var n=t;e["extends"]&&(n=p(e["extends"]));var a=function(e){var t={};for(var n in e)t[n]=e[n];return t},f=n?a(n.Properties):{};for(var l in e.properties){var d=t;e.properties[l].type instanceof String||typeof e.properties[l].type=="string"?d=p(e.properties[l].type):d=this.registerClass(e.properties[l].type),f[l]=new i({name:l,description:e.properties[l].description,mandatory:e.properties[l].mandatory,type:d}),f[l].Type||c(e.properties[l].type,f[l],"Type")}var v=n?a(n.constructors):{};for(var m in e.constructors){var y={};for(var b in e.constructors[m].arguments){var w=t;e.constructors[m].arguments[b].type instanceof String||typeof e.constructors[m].arguments[b].type=="string"?w=p(e.constructors[m].arguments[b].type):w=this.registerClass(e.constructors[m].arguments[b].type),y[b]=new o({name:b,description:e.constructors[m].arguments[b].description,mandatory:e.constructors[m].arguments[b].mandatory,type:w}),y[b].Type||c(e.constructors[m].arguments[b].type,y[b],"Type")}var E={};for(var S=0;S<e.constructors[m].exceptions.length;S++)if(e.constructors[m].exceptions[S]instanceof String||typeof e.constructors[m].exceptions[S]=="string"){var x=p(e.constructors[m].exceptions[S]);E[x.toString()]=x,E[x.toString()]||c(e.constructors[m].exceptions[S],E,x.toString())}else{var x=this.registerClass(e.constructors[m].exceptions[S]);E[x.toString()]=x}var T={name:m,description:e.constructors[m].description,arguments:y,exceptions:E};e.constructors[m]["return"]&&(e.constructors[m]["return"]instanceof String||typeof e.constructors[m]["return"]=="string"?T["return"]=p(e.constructors[m]["return"]):T["return"]=this.registerClass(e.constructors[m]["return"])),v[m]=new s(T),e.constructors[m]["return"]&&!v[m].Return&&c(e.constructors[m]["return"],v[m],"Return")}var N=n?a(n.Methods):{};for(var m in e.methods){var y={};for(var b in e.methods[m].arguments){var w=t;e.methods[m].arguments[b].type instanceof String||typeof e.methods[m].arguments[b].type=="string"?w=p(e.methods[m].arguments[b].type):w=this.registerClass(e.methods[m].arguments[b].type),y[b]=new o({name:b,description:e.methods[m].arguments[b].description,mandatory:e.methods[m].arguments[b].mandatory,type:w}),y[b].Type||c(e.methods[m].arguments[b].type,y[b],"Type")}var E={};for(var S=0;S<e.methods[m].exceptions.length;S++)if(e.methods[m].exceptions[S]instanceof String||typeof e.methods[m].exceptions[S]=="string"){var x=p(e.methods[m].exceptions[S]);E[x.toString()]=x,E[x.toString()]||c(e.methods[m].exceptions[S],E,x.toString())}else{var x=this.registerClass(e.methods[m].exceptions[S]);E[x.toString()]=x}var T={name:m,description:e.methods[m].description,arguments:y,exceptions:E};e.methods[m]["return"]&&(e.methods[m]["return"]instanceof String||typeof e.methods[m]["return"]=="string"?T["return"]=p(e.methods[m]["return"]):T["return"]=this.registerClass(e.methods[m]["return"])),N[m]=new s(T),e.methods[m]["return"]&&!N[m].Return&&c(e.methods[m]["return"],N[m],"Return")}var C=n?a(n.Events):{};for(var L in e.events){var A=t;e.events[L].type instanceof String||typeof e.events[L].type=="string"?A=p(e.events[L].handler):A=this.registerHandler(e.events[L].handler),C[L]=new u({name:L,description:e.events[L].description,handler:A})}var O=new r({name:e.name,namespace:e.namespace,base:n,description:e.description,properties:f,constructors:v,methods:N,events:C});e["extends"]&&!O.Base&&c(e["extends"],O,"Base");var M=h(e.namespace);return M.Classes||(M.Classes={}),M.Classes[e.name]=O,n&&(typeof n.Subclasses=="undefined"&&(n.Subclasses=new Object),n.Subclasses[O.toString()]=O),O},e.registerHandler=function(e){e.name==t&&(e.name=guidGenerator()),e.namespace==t&&(e.namespace="Anonymous");var n={};for(var r in e.arguments){var i=t;e.arguments[r].type instanceof String||typeof e.arguments[r].type=="string"?i=p(e.arguments[r].type):i=this.registerClass(e.arguments[r].type),n[r]=new o({name:r,description:e.arguments[r].description,mandatory:e.arguments[r].mandatory,type:i}),n[r].Type||c(e.arguments[r].type,n[r],"Type")}var s=new a({name:e.name,namespace:e.namespace,description:e.description,arguments:n}),u=h(e.namespace);return u.Classes||(u.Classes={}),u.Classes[e.name]=s,s},e.getClass=function(e){return p(e)},e.getModule=function(e){return e?h(e):f.root},e.validateProperties=function(n,r){var i=n instanceof String||typeof n=="string"?p(n):n;for(var s in i.Properties){if(i.Properties[s].Mandatory==1&&r[s]===t)return!1;if(i.Properties[s].Mandatory==0&&r[s]===t)continue;if(i.Properties[s].Type==e.get("Object")&&typeof r[s]=="object")continue;if(i.Properties[s].Type==e.get("String")){if(r[s]instanceof String||typeof r[s]=="string")continue;return!1}if(i.Properties[s].Type==e.get("Number")){if(!isNaN(parseFloat(r[s]))&&isFinite(r[s]))continue;return!1}if(i.Properties[s].Type==e.get("Boolean")){if(r[s]instanceof Boolean||typeof r[s]=="boolean")continue;return!1}if(i.Properties[s].Type==e.get("Array")){if(typeof r[s]=="object"&&r[s].constructor==Array)continue;return!1}if(i.Properties[s].Type==e.get("Function")){if(r[s]instanceof Function)continue;return!1}if(e.validateProperties(i.Properties[s].Type,r[s]))continue;return!1}return!0}})(e.Metadata=e.Metadata||{})}(window.xRTML=window.xRTML||{}),function(e){(function(e,t){e[xRTML.version]?xRTML=e[xRTML.version]:e[xRTML.version]=xRTML,e.current=e.current||xRTML.version,xRTML=e[e.current]})(e.xRTMLVersions=e.xRTMLVersions||{})}(window);