/**
* PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
**/

this.createjs=this.createjs||{},function(){var e=function(){this.init()};e.prototype={};var t=e.prototype;t.loaded=!1,t.canceled=!1,t.progress=0,t._item=null,t.onProgress=null,t.onLoadStart=null,t.onFileLoad=null,t.onFileProgress=null,t.onComplete=null,t.onError=null,t.getItem=function(){return this._item},t.init=function(){},t.load=function(){},t.cancel=function(){},t._sendLoadStart=function(){!this._isCanceled()&&this.onLoadStart&&this.onLoadStart({target:this})},t._sendProgress=function(e){if(!this._isCanceled()){var t;if(e instanceof Number)this.progress=e,t={loaded:this.progress,total:1};else if(t=e,this.progress=e.loaded/e.total,isNaN(this.progress)||this.progress==Infinity)this.progress=0;t.target=this,this.onProgress&&this.onProgress(t)}},t._sendFileProgress=function(e){this._isCanceled()?this._cleanUp():this.onFileProgress&&(e.target=this,this.onFileProgress(e))},t._sendComplete=function(){!this._isCanceled()&&this.onComplete&&this.onComplete({target:this})},t._sendFileComplete=function(e){!this._isCanceled()&&this.onFileLoad&&(e.target=this,this.onFileLoad(e))},t._sendError=function(e){!this._isCanceled()&&this.onError&&(e==null&&(e={}),e.target=this,this.onError(e))},t._isCanceled=function(){return window.createjs==null||this.canceled?!0:!1},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.AbstractLoader;e.IMAGE="image",e.SVG="svg",e.SOUND="sound",e.JSON="json",e.JAVASCRIPT="javascript",e.CSS="css",e.XML="xml",e.TEXT="text",e.TIMEOUT_TIME=8e3,t.useXHR=!0,t.stopOnError=!1,t.maintainScriptOrder=!0,t.next=null,t.typeHandlers=null,t.extensionHandlers=null,t._loadStartWasDispatched=!1,t._maxConnections=1,t._currentLoads=null,t._loadQueue=null,t._loadedItemsById=null,t._loadedItemsBySrc=null,t._targetProgress=0,t._numItems=0,t._numItemsLoaded=null,t._scriptOrder=null,t._loadedScripts=null,t.TAG_LOAD_OGGS=!0,t.initialize=function(e){this._targetProgress=this._numItemsLoaded=this._numItems=0,this._paused=!1,this._currentLoads=[],this._loadQueue=[],this._scriptOrder=[],this._loadedScripts=[],this._loadedItemsById={},this._loadedItemsBySrc={},this.typeHandlers={},this.extensionHandlers={},this._loadStartWasDispatched=!1,this.useXHR=e!=0&&window.XMLHttpRequest!=null,this.determineCapabilities()},t.determineCapabilities=function(){var e=createjs.PreloadJS.BrowserDetect;e!=null&&(createjs.PreloadJS.TAG_LOAD_OGGS=e.isFirefox||e.isOpera)},e.isBinary=function(e){switch(e){case createjs.PreloadJS.IMAGE:case createjs.PreloadJS.SOUND:return!0;default:return!1}},t.installPlugin=function(e){if(e!=null&&e.getPreloadHandlers!=null){e=e.getPreloadHandlers();if(e.types!=null)for(var t=0,n=e.types.length;t<n;t++)this.typeHandlers[e.types[t]]=e.callback;if(e.extensions!=null)for(t=0,n=e.extensions.length;t<n;t++)this.extensionHandlers[e.extensions[t]]=e.callback}},t.setMaxConnections=function(e){this._maxConnections=e,this._paused||this._loadNext()},t.loadFile=function(e,t){e==null?this._sendError({text:"File is null."}):(this._addItem(e),t!==!1&&this.setPaused(!1))},t.loadManifest=function(e,t){var n;if(e instanceof Array){if(e.length==0){this._sendError({text:"Manifest is empty."});return}n=e}else{if(e==null){this._sendError({text:"Manifest is null."});return}n=[e]}for(var r=0,i=n.length;r<i;r++)this._addItem(n[r],!1);t!==!1&&this._loadNext()},t.load=function(){this.setPaused(!1)},t.getResult=function(e){return this._loadedItemsById[e]||this._loadedItemsBySrc[e]},t.setPaused=function(e){(this._paused=e)||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0},t._addItem=function(e){e=this._createLoadItem(e),e!=null&&(this._loadQueue.push(e),this._numItems++,this._updateProgress(),e.getItem().type==createjs.PreloadJS.JAVASCRIPT&&(this._scriptOrder.push(e.getItem()),this._loadedScripts.push(null)))},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded&&(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load.apply(this.next));for(;this._loadQueue.length&&this._currentLoads.length<this._maxConnections;)this._loadItem(this._loadQueue.shift())}},t._loadItem=function(e){e.onProgress=createjs.PreloadJS.proxy(this._handleProgress,this),e.onComplete=createjs.PreloadJS.proxy(this._handleFileComplete,this),e.onError=createjs.PreloadJS.proxy(this._handleFileError,this),this._currentLoads.push(e),e.load()},t._handleFileError=function(e){var e=e.target,t=this._createResultData(e.getItem());this._numItemsLoaded++,this._updateProgress(),this._sendError(t),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},t._createResultData=function(e){var t={id:e.id,result:null,data:e.data,type:e.type,src:e.src};return this._loadedItemsById[e.id]=t,this._loadedItemsBySrc[e.src]=t},t._handleFileComplete=function(e){var e=e.target,t=e.getItem(),n=this._createResultData(t);this._removeLoadItem(e),n.result=e instanceof createjs.XHRLoader?this._createResult(t,e.getResult()):t.tag;switch(t.type){case createjs.PreloadJS.IMAGE:if(e instanceof createjs.XHRLoader){var r=this;n.result.onload=function(){r._handleFileTagComplete(t,n)};return}break;case createjs.PreloadJS.JAVASCRIPT:if(this.maintainScriptOrder){this._loadedScripts[this._scriptOrder.indexOf(t)]=t,this._checkScriptLoadOrder(e);return}}this._handleFileTagComplete(t,n)},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;t<e;t++){var n=this._loadedScripts[t];if(n===null)break;if(n!==!0){var r=this.getResult(n.src),n=this.getResult(n.id);n.result=r.result,this._handleFileTagComplete(r,n),this._loadedScripts[t]=!0,t--,e--}}},t._handleFileTagComplete=function(e,t){this._numItemsLoaded++,e.completeHandler&&e.completeHandler(t),this._updateProgress(),this._sendFileComplete(t),this._loadNext()},t._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;n<t;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}},t._createResult=function(e,t){var n=null,r;switch(e.type){case createjs.PreloadJS.IMAGE:n=this._createImage();break;case createjs.PreloadJS.SOUND:n=e.tag||this._createAudio();break;case createjs.PreloadJS.CSS:n=this._createLink();break;case createjs.PreloadJS.JAVASCRIPT:n=this._createScript();break;case createjs.PreloadJS.SVG:var n=this._createSVG(),i=this._createXML(t,"image/svg+xml");n.appendChild(i);break;case createjs.PreloadJS.XML:r=this._createXML(t,"text/xml");break;case createjs.PreloadJS.JSON:case createjs.PreloadJS.TEXT:r=t}return n?(e.type==createjs.PreloadJS.CSS?n.href=e.src:e.type!=createjs.PreloadJS.SVG&&(n.src=e.src),n):r},t._createXML=function(e,t){var n;return window.DOMParser?(n=new DOMParser,n=n.parseFromString(e,t)):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e)),n},t._handleProgress=function(e){var e=e.target,t=this._createResultData(e.getItem());t.progress=e.progress,this._sendFileProgress(t),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var n=0,r=0,i=this._currentLoads.length;r<i;r++)n+=this._currentLoads[r].progress;e+=n/t*(t/this._numItems)}this._sendProgress({loaded:e,total:1})},t._createLoadItem=function(e){var t={};switch(typeof e){case"string":t.src=e;break;case"object":e instanceof HTMLAudioElement?(t.tag=e,t.src=t.tag.src,t.type=createjs.PreloadJS.SOUND):t=e}t.ext=this._getNameAfter(t.src,"."),t.type||(t.type=this.getType(t.ext));if(t.id==null||t.id=="")t.id=t.src;if(e=this.typeHandlers[t.type]||this.extensionHandlers[t.ext]){e=e(t.src,t.type,t.id,t.data);if(e===!1)return null;e!==!0&&(e.src!=null&&(t.src=e.src),e.id!=null&&(t.id=e.id),e.tag!=null&&e.tag.load instanceof Function&&(t.tag=e.tag)),t.ext=this._getNameAfter(t.src,".")}e=this.useXHR;switch(t.type){case createjs.PreloadJS.JSON:case createjs.PreloadJS.XML:case createjs.PreloadJS.TEXT:e=!0;break;case createjs.PreloadJS.SOUND:t.ext=="ogg"&&createjs.PreloadJS.TAG_LOAD_OGGS&&(e=!1)}return this.useXHR!=1||t.type!=createjs.PreloadJS.IMAGE&&t.type!=createjs.PreloadJS.SVG?e?new createjs.XHRLoader(t):t.tag?new createjs.TagLoader(t):this._createTagItem(t):(t=this._createTagItem(t),t.useXHR=!0,t)},t._createTagItem=function(e){var t,n="src",r=!1;switch(e.type){case createjs.PreloadJS.IMAGE:t=this._createImage();break;case createjs.PreloadJS.SOUND:t=this._createAudio();break;case createjs.PreloadJS.CSS:n="href",r=!0,t=this._createLink();break;case createjs.PreloadJS.JAVASCRIPT:r=!0,t=this._createScript();break;case createjs.PreloadJS.SVG:n="data",t=this._createSVG()}return e.tag=t,new createjs.TagLoader(e,n,r)},t.getType=function(e){switch(e){case"jpeg":case"jpg":case"gif":case"png":return createjs.PreloadJS.IMAGE;case"ogg":case"mp3":case"wav":return createjs.PreloadJS.SOUND;case"json":return createjs.PreloadJS.JSON;case"xml":return createjs.PreloadJS.XML;case"css":return createjs.PreloadJS.CSS;case"js":return createjs.PreloadJS.JAVASCRIPT;case"svg":return createjs.PreloadJS.SVG;default:return createjs.PreloadJS.TEXT}},t._getNameAfter=function(e,t){var n=e.lastIndexOf(t),n=e.substr(n+1),r=n.lastIndexOf(/[\b|\?|\#|\s]/);return r==-1?n:n.substr(0,r)},t._createImage=function(){return document.createElement("img")},t._createSVG=function(){var e=document.createElement("object");return e.type="image/svg+xml",e},t._createAudio=function(){var e=document.createElement("audio");return e.autoplay=!1,e.type="audio/ogg",e},t._createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e},t._createLink=function(){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e},t.toString=function(){return"[PreloadJS]"},e.proxy=function(e,t){return function(n){return e.apply(t,arguments)}},createjs.PreloadJS=e;var n=function(){};n.init=function(){var e=navigator.userAgent;n.isFirefox=e.indexOf("Firefox")>-1,n.isOpera=window.opera!=null,n.isIOS=e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1},n.init(),createjs.PreloadJS.BrowserDetect=n}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.init(e,t,n)},t=e.prototype=new createjs.AbstractLoader;t._srcAttr=null,t._loadTimeOutTimeout=null,t.tagCompleteProxy=null,t.init=function(e,t,n){this._item=e,this._srcAttr=t||"src",this.useXHR=n==1,this.isAudio=e.tag instanceof HTMLAudioElement,this.tagCompleteProxy=createjs.PreloadJS.proxy(this._handleTagLoad,this)},t.cancel=function(){this.canceled=!0,this._clean();var e=this.getItem();e!=null&&(e.src=null)},t.load=function(){this.useXHR?this.loadXHR():this.loadTag()},t.loadXHR=function(){var e=this.getItem(),e=new createjs.XHRLoader(e);e.onProgress=createjs.PreloadJS.proxy(this._handleProgress,this),e.onFileLoad=createjs.PreloadJS.proxy(this._handleXHRComplete,this),e.onComplete=createjs.PreloadJS.proxy(this._handleXHRComplete,this),e.onError=createjs.PreloadJS.proxy(this._handleLoadError,this),e.load()},t._handleXHRComplete=function(e){if(!this._isCanceled()){this._clean(),e.target.onFileLoad=null,e.target.onComplete=null;var t=e.target.getItem();e.target.getResult(),t.type==createjs.PreloadJS.IMAGE?(t.tag.onload=createjs.PreloadJS.proxy(this._sendComplete,this),t.tag.src=t.src):(t.tag[this._srcAttr]=t.src,this._sendComplete())}},t._handleLoadError=function(e){e.error&&e.error.code==101?this.loadTag():(this._clean(),this._sendError(e))},t.loadTag=function(){var e=this.getItem(),t=e.tag;clearTimeout(this._loadTimeOutTimeout),this._loadTimeOutTimeout=setTimeout(createjs.PreloadJS.proxy(this._handleLoadTimeOut,this),createjs.PreloadJS.TIMEOUT_TIME),this.isAudio&&(t.src=null,t.preload="auto",t.setAttribute("data-temp","true")),t.onerror=createjs.PreloadJS.proxy(this._handleLoadError,this),t.onprogress=createjs.PreloadJS.proxy(this._handleProgress,this),this.isAudio?(t.onstalled=createjs.PreloadJS.proxy(this._handleStalled,this),t.addEventListener("canplaythrough",this.tagCompleteProxy,!1)):t.onload=createjs.PreloadJS.proxy(this._handleTagLoad,this),t[this._srcAttr]=e.src,e.type==createjs.PreloadJS.SVG&&document.getElementsByTagName("body")[0].appendChild(t),e=e.type==createjs.PreloadJS.SOUND&&e.ext=="ogg"&&createjs.PreloadJS.BrowserDetect.isFirefox,t.load!=null&&!e&&t.load()},t._handleLoadTimeOut=function(){this._clean(),this._sendError()},t._handleStalled=function(){},t._handleLoadError=function(){this._clean(),this._sendError()},t._handleTagLoad=function(){if(!this._isCanceled()){var e=this.getItem().tag;clearTimeout(this._loadTimeOutTimeout),this.loaded||this.isAudio&&e.readyState!==4||(this.getItem().type==createjs.PreloadJS.SVG&&document.getElementsByTagName("body")[0].removeChild(e),this.loaded=!0,this._clean(),this._sendComplete())}},t._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this.getItem().tag;e.onload=null,e.removeEventListener&&e.removeEventListener("canplaythrough",this.tagCompleteProxy,!1),e.onstalled=null,e.onprogress=null,e.onerror=null},t._handleProgress=function(e){clearTimeout(this._loadTimeOutTimeout);if(this.isAudio){e=this.getItem();if(e.buffered==null)return;e={loaded:e.buffered.length>0?e.buffered.end(0):0,total:e.duration}}this._sendProgress(e)},t.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.init(e)},t=e.prototype=new createjs.AbstractLoader;t._wasLoaded=!1,t._request=null,t._loadTimeOutTimeout=null,t._xhrLevel=null,t.init=function(e){this._item=e,this._createXHR(e)},t.getResult=function(){try{return this._request.responseText}catch(e){}return this._request.response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(this._request==null)this.handleError();else{this._xhrLevel==1&&(this._loadTimeOutTimeout=setTimeout(createjs.PreloadJS.proxy(this.handleTimeout,this),createjs.PreloadJS.TIMEOUT_TIME)),this._request.onloadstart=createjs.PreloadJS.proxy(this.handleLoadStart,this),this._request.onprogress=createjs.PreloadJS.proxy(this.handleProgress,this),this._request.onabort=createjs.PreloadJS.proxy(this.handleAbort,this),this._request.onerror=createjs.PreloadJS.proxy(this.handleError,this),this._request.ontimeout=createjs.PreloadJS.proxy(this.handleTimeout,this),this._request.onload=createjs.PreloadJS.proxy(this.handleLoad,this),this._request.onreadystatechange=createjs.PreloadJS.proxy(this.handleReadyStateChange,this);try{this._request.send()}catch(e){this._sendError({source:e})}}},t.handleProgress=function(e){e.loaded>0&&e.total==0||this._sendProgress({loaded:e.loaded,total:e.total})},t.handleLoadStart=function(){clearTimeout(this._loadTimeOutTimeout),this._sendLoadStart()},t.handleAbort=function(){this._clean(),this._sendError()},t.handleError=function(){this._clean(),this._sendError()},t.handleReadyStateChange=function(){this._request.readyState==4&&this.handleLoad()},t._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return!1}return this._hasResponse()||this._hasTextResponse()||this._hasXMLResponse()},t._hasResponse=function(){return this._request.response!=null},t._hasTextResponse=function(){try{return this._request.responseText!=null}catch(e){return!1}},t._hasXMLResponse=function(){try{return this._request.responseXML!=null}catch(e){return!1}},t.handleLoad=function(){this.loaded||(this.loaded=!0,this._checkError()?(this._clean(),this._sendComplete()):this.handleError())},t.handleTimeout=function(){this._clean(),this._sendError()},t._createXHR=function(e){this._xhrLevel=1,window.ArrayBuffer&&(this._xhrLevel=2);if(window.XMLHttpRequest)this._request=new XMLHttpRequest;else try{this._request=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){return null}return e.type==createjs.PreloadJS.TEXT&&this._request.overrideMimeType&&this._request.overrideMimeType("text/plain; charset=x-user-defined"),this._request.open("GET",e.src,!0),createjs.PreloadJS.isBinary(e.type)&&(this._request.responseType="arraybuffer"),!0},t._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this._request;e.onloadstart=null,e.onprogress=null,e.onabort=null,e.onerror=null,e.onload=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null,clearInterval(this._checkLoadInterval)},t.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=e}();