define("MovesLayer",["easel","tween"],function(){var e;return e=function(){this.tiles=[],this.possibles=[],this.graphics=new createjs.Container;for(var e=0;e<32;e++){var t={row:0,col:0,piece:null,graphics:null,visible:!1,setPosition:function(e,t){this.row=e,this.col=t},setVisible:function(e,t){this.visible=t,this.visible?(this.piece=e,this.glow(e)):this.fadeOut()},glow:function(){var e=this;this.graphics.alpha=.3,this.graphics.y=this.piece.row*64,this.graphics.x=this.piece.col*64,createjs.Tween.get(this.graphics,{override:!0}).to({x:this.col*64,y:this.row*64},150)},fadeOut:function(){this.piece?(createjs.Tween.get(this.graphics,{override:!0}).to({x:this.piece.col*64,y:this.piece.row*64,alpha:0},300),this.piece=null):(this.graphics.alpha=0,this.piece=null)}},n=new createjs.Graphics;n.beginFill("#cc0"),n.drawRect(0,0,64,64),n.endFill(),t.graphics=new createjs.Shape(n),t.graphics.x=e*5,t.graphics.alpha=0,this.tiles.push(t),this.graphics.addChild(t.graphics)}},e.prototype={initialize:function(){},setPossibleMoves:function(e,t){this.possibles=t;for(var n=0,r=0;n<this.tiles.length;n++){var i=this.tiles[n];if(t!=null&&r<t.length){var s=t[r];i.setPosition(s.to.row,s.to.col),i.setVisible(e,!0),r++}else i.setVisible(e,!1)}},canMoveHere:function(e,t,n,r){return e[t][n].charAt(0)!=r.color},isPossibleMove:function(e,t){for(var n in this.possibles){var r=this.possibles[n];if(r.to.row==e&&r.to.col==t)return!0}return!1},activate:function(){},deactivate:function(){this.setPossibleMoves(null)}},e});